[
  {
    "objectID": "posts/2021-05-06-floating-toc-in-blogdown/index.html",
    "href": "posts/2021-05-06-floating-toc-in-blogdown/index.html",
    "title": "Add a Floating Table of Contents in blogdown\n",
    "section": "",
    "text": "Welcome to my very first blog post (i.e., I do not count ggpacman).\nThe focus of this post is on blogdown (github.com/rstudio/blogdown), in particular on how to have a table of contents (TOC) on either the left or the right side of a post to ease the navigation through a long post.\nIn the past few weeks, I have been slowly getting my head around blogdown and HUGO, to finally published this website about a week ago.\nOne of the latest tweak I had to figure out was: how to get a floating TOC.\nGetting a TOC is quite easy with an Rmarkdown, thus it should be the same in blogdown.\n---\noutput:\n  rmarkdown::html_document:\n    toc: true\n---\nFor the remaining of this post, I will use the “wowchemy/starter-hugo-academic” HUGO theme within a new default blogdown website created with the following function call.\n\nblogdown::new_site(theme = \"wowchemy/starter-hugo-academic\")"
  },
  {
    "objectID": "posts/2021-05-06-floating-toc-in-blogdown/index.html#welcome",
    "href": "posts/2021-05-06-floating-toc-in-blogdown/index.html#welcome",
    "title": "Add a Floating Table of Contents in blogdown\n",
    "section": "",
    "text": "Welcome to my very first blog post (i.e., I do not count ggpacman).\nThe focus of this post is on blogdown (github.com/rstudio/blogdown), in particular on how to have a table of contents (TOC) on either the left or the right side of a post to ease the navigation through a long post.\nIn the past few weeks, I have been slowly getting my head around blogdown and HUGO, to finally published this website about a week ago.\nOne of the latest tweak I had to figure out was: how to get a floating TOC.\nGetting a TOC is quite easy with an Rmarkdown, thus it should be the same in blogdown.\n---\noutput:\n  rmarkdown::html_document:\n    toc: true\n---\nFor the remaining of this post, I will use the “wowchemy/starter-hugo-academic” HUGO theme within a new default blogdown website created with the following function call.\n\nblogdown::new_site(theme = \"wowchemy/starter-hugo-academic\")"
  },
  {
    "objectID": "posts/2021-05-06-floating-toc-in-blogdown/index.html#tldr",
    "href": "posts/2021-05-06-floating-toc-in-blogdown/index.html#tldr",
    "title": "Add a Floating Table of Contents in blogdown\n",
    "section": "\n2 TL;DR",
    "text": "2 TL;DR\nWithin a blogdown installation based on the “wowchemy/starter-hugo-academic” HUGO theme:\n\n\nCreate &lt;root&gt;/layouts/_default/single.html.\n\nwriteLines(\n  text = c(\n    '{{- define \"main\" -}}',\n    '&lt;article class=\"article\"&gt;',\n    '  {{ partial \"page_header\" . }}',\n    '  &lt;div class=\"article-container\"&gt;',\n    '    &lt;div class=\"row\"&gt;',\n    '      &lt;div class=\"col-12 col-lg-9 article-style\"&gt;',\n    '        {{ .Content }}',\n    '      &lt;/div&gt;',\n    '      &lt;div class=\"col-12 col-lg-3 docs-toc\"&gt;',\n    '        &lt;ul class=\"nav toc-top\"&gt;',\n    '          &lt;li&gt;',\n    '            &lt;a href=\"#\" id=\"back_to_top\" class=\"docs-toc-title\"&gt;',\n    '              {{ i18n \"on_this_page\" }}',\n    '            &lt;/a&gt;',\n    '          &lt;/li&gt;',\n    '        &lt;/ul&gt;',\n    '        {{ .TableOfContents }}',\n    '      &lt;/div&gt;',\n    '    &lt;/div&gt;',\n    '    {{ partial \"page_footer\" . }}',\n    '  &lt;/div&gt;',\n    '&lt;/article&gt;',\n    '{{- end -}}'\n  ), \n  con = \"layouts/_default/single.html\"\n)\n\n\n\nAdd to your &lt;root&gt;/.Rprofile.\n\noptions(blogdown.method = \"markdown\")\n\n\n\nWrite your posts in an Rmd or Rmarkdown file (it Makes no difference now) with the following in the YAML header.\noutput:\n  blogdown::html_page:\n    toc: true\n\nYou are all set!\n\nNote: To a more complete setup workflow for blogdown, I recommend to have a look at Alison Hill’s blog post: “Up & Running with Blogdown in 2021”."
  },
  {
    "objectID": "posts/2021-05-06-floating-toc-in-blogdown/index.html#default-rmarkdown-post",
    "href": "posts/2021-05-06-floating-toc-in-blogdown/index.html#default-rmarkdown-post",
    "title": "Add a Floating Table of Contents in blogdown\n",
    "section": "\n3 Default Rmarkdown Post",
    "text": "3 Default Rmarkdown Post\nOnce installed, several default posts are available, including simple markdown file, Jupyter notebook file and Rmarkdown file.\nMost of this post will focus on the Rmarkdown file with .Rmd extension.\nThe default Rmarkdown file can be found at content/post/2020-12-01-r-rmarkdown/index.en.Rmd from the root directory of the website.\n---\ntitle: \"Hello R Markdown\"\nauthor: \"Frida Gomam\"\ndate: 2020-12-01T21:13:14-05:00\ncategories: [\"R\"]\ntags: [\"R Markdown\", \"plot\", \"regression\"]\n---\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(collapse = TRUE)\n```\n\n## R Markdown\n\nThis is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see &lt;http://rmarkdown.rstudio.com&gt;.\n\nYou can embed an R code chunk like this:\n\n```{r cars}\nsummary(cars)\nfit &lt;- lm(dist ~ speed, data = cars)\nfit\n```\n\n## Including Plots\n\nYou can also embed plots. See Figure \\@ref(fig:pie) for example:\n\n```{r pie, fig.cap='A fancy pie chart.', tidy=FALSE}\npar(mar = c(0, 1, 0, 1))\npie(\n  c(280, 60, 20),\n  c('Sky', 'Sunny side of pyramid', 'Shady side of pyramid'),\n  col = c('#0292D8', '#F7EA39', '#C4B632'),\n  init.angle = -50, border = NA\n)\n```\nTo be fair, the above document is not exactly the default Rmarkdown file.\nIn fact, I decreased the headings level, or increase the number of #, by one.\nThe reason for this small modification comes from the default configuration of HUGO within the config.yaml file.\n...\nmarkup:\n  defaultMarkdownHandler: goldmark\n  goldmark:\n    renderer:\n      unsafe: true\n  highlight:\n    codeFences: false\n  tableOfContents:\n    startLevel: 2\n    endLevel: 3\n...\nAs you can see, the TOC is defined to include from level 2 to level 3, so by default, the changes we are going to make would not have any effect for this particular document which only contains level 1 headings.\nPosts and any other Rmarkdown contents are rendered with rmarkdown::render_site(), hence, for our default Rmarkdown (content/post/2020-12-01-r-rmarkdown/index.en.Rmd), the rendering is done with rmarkdown::render_site('content/post/2020-12-01-r-rmarkdown/index.en.Rmd').\n\nNote: In this case, rmarkdown::render_site() produces a HTML file: index.en.html."
  },
  {
    "objectID": "posts/2021-05-06-floating-toc-in-blogdown/index.html#default-with-a-toc",
    "href": "posts/2021-05-06-floating-toc-in-blogdown/index.html#default-with-a-toc",
    "title": "Add a Floating Table of Contents in blogdown\n",
    "section": "\n4 Default with a TOC",
    "text": "4 Default with a TOC\nFirst, let’s edit the default index.en.Rmd file by adding three lines. in the YAML header as we would have done in a regular rmarkdown::html_document() to add a TOC.\nFor a blogdown post, the output format is blogdown::html_page().\nThis output format produces a headless HTML file (i.e., there is no need for header/body part, since the file is going to be included as a part of another HTML file).\noutput:\n  blogdown::html_page:\n    toc: true\nWith this addition, the index.en.Rmd looks like this (not that different, isn’t it?!).\n---\ntitle: \"Hello R Markdown\"\nauthor: \"Frida Gomam\"\ndate: 2020-12-01T21:13:14-05:00\ncategories: [\"R\"]\ntags: [\"R Markdown\", \"plot\", \"regression\"]\noutput:\n  blogdown::html_page:\n    toc: true\n---\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(collapse = TRUE)\n```\n\n## R Markdown\n\nThis is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see &lt;http://rmarkdown.rstudio.com&gt;.\n\nYou can embed an R code chunk like this:\n\n```{r cars}\nsummary(cars)\nfit &lt;- lm(dist ~ speed, data = cars)\nfit\n```\n\n## Including Plots\n\nYou can also embed plots. See Figure \\@ref(fig:pie) for example:\n\n```{r pie, fig.cap='A fancy pie chart.', tidy=FALSE}\npar(mar = c(0, 1, 0, 1))\npie(\n  c(280, 60, 20),\n  c('Sky', 'Sunny side of pyramid', 'Shady side of pyramid'),\n  col = c('#0292D8', '#F7EA39', '#C4B632'),\n  init.angle = -50, border = NA\n)\n```\nSince, we changed the YAML header, we need to render again, with rmarkdown::render_site(), the HTML file from index.en.Rmd.\n\nNow we have a TOC, but it sticks to the top.\nAt this stage, we did all we could in the Rmarkdown file index.en.Rmd."
  },
  {
    "objectID": "posts/2021-05-06-floating-toc-in-blogdown/index.html#modify-the-layout",
    "href": "posts/2021-05-06-floating-toc-in-blogdown/index.html#modify-the-layout",
    "title": "Add a Floating Table of Contents in blogdown\n",
    "section": "\n5 Modify the Layout",
    "text": "5 Modify the Layout\nBecause everything that relates to the structure of the pages on the website are defined in HTML template files stored in a layouts directory, the answer to our “problem” should be there.\nAnd that is the case, as stated in a issue opened on GitHub (wowchemy/wowchemy-hugo-themes #1520). More precisely in @CharlieLeee’s comment.\nAs mentioned in the comment, we need to modify a particular file, namely layouts/_default/single.html, but what is inside this layouts/_default/single.html file from the “wowchemy/starter-hugo-academic” theme?\nIn a default installation, the file is located in the following path themes/github.com/wowchemy/wowchemy-hugo-themes/wowchemy/layouts/_default/single.html and it includes the following HTML/code.\n{{- define \"main\" -}}\n\n&lt;article class=\"article\"&gt;\n\n  {{ partial \"page_header\" . }}\n\n  &lt;div class=\"article-container\"&gt;\n\n    &lt;div class=\"article-style\"&gt;\n      {{ .Content }}\n    &lt;/div&gt;\n\n    {{ partial \"page_footer\" . }}\n\n  &lt;/div&gt;\n&lt;/article&gt;\n\n{{- end -}}\nNote: Have a look at HUGO website for the HUDO templating syntax.\nWe do not want to modify any of the files in the themes directory, so we will create a new file at the root directory of our blogdown website (layouts/_default/single.html).\nI am not going to use the code proposed in @CharlieLeee’s comment, but instead a slight modification to make the TOC a bit more responsive.\nIn this case, the TOC will use three out of the twelve columns in a wide screen (i.e., grid layout). On a smaller screen, the TOC will occupy twelve columns (i.e., equivalent to the css width: 100%;) and will be wrapped after the contents, hence it will be under.\nTo note and for later, in the code chunk below:\n\n\n.Content is a HUGO variable which contains the content of the post.\n\n.TableOfContents is a HUGO variable which contains the TOC of the post.\n\n{{- define \"main\" -}}\n\n&lt;article class=\"article\"&gt;\n\n  {{ partial \"page_header\" . }}\n\n  &lt;div class=\"article-container\"&gt;\n\n    &lt;div class=\"row\"&gt;\n      \n      &lt;div class=\"col-12 col-lg-9 article-style\"&gt;\n        {{ .Content }} &lt;!-- HUGO variable which contains the content of the post --&gt;\n      &lt;/div&gt;\n      \n      &lt;div class=\"col-12 col-lg-3 docs-toc\"&gt;\n        &lt;ul class=\"nav toc-top\"&gt;\n          &lt;li&gt;\n            &lt;a href=\"#\" id=\"back_to_top\" class=\"docs-toc-title\"&gt;\n              {{ i18n \"on_this_page\" }}\n            &lt;/a&gt;\n          &lt;/li&gt;\n        &lt;/ul&gt;\n    \n        {{ .TableOfContents }} &lt;!-- HUGO variable which contains the TOC of the post --&gt;\n        \n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    {{ partial \"page_footer\" . }}\n\n  &lt;/div&gt;\n&lt;/article&gt;\n\n{{- end -}}\nAgain, we need to render the index.en.Rmd file, or to restart the website (blogdown::stop_server()/blogdown::serve_site()) to ensure all modifications are taken into account.\n\nNot quite, what we could have expected …\nThe TOC from the Rmarkdown (HTML) file is still at the top, but there is a “Contents” on the right side (as define in layouts/_default/single.html).\nThis “Contents” comes from our modified layout file and it is not included in a HUGO variable.\nThis TOC header is a hypertext reference to the top of the current page.\n&lt;ul class=\"nav toc-top\"&gt;\n  &lt;li&gt;\n    &lt;a href=\"#\" id=\"back_to_top\" class=\"docs-toc-title\"&gt;\n      {{ i18n \"on_this_page\" }}\n    &lt;/a&gt;\n  &lt;/li&gt;\n&lt;/ul&gt;\nOur layout seems to “work”, but somehow, does not include the TOC of our HTML file generated from the index.en.Rmd file.\nLet’s have a look at another post in plain markdown from our blogdown website.\n\nBefore the modifications of the layout\nAfter the modifications of the layout\n\nIt’s looking great for the markdown post!\nIn conclusion and since we modified the page layout, the issue no longer seems to be on the HUGO side.\nIf we take a look at the HTML file produced by rmarkdown::render_site().\n---\ntitle: \"Hello R Markdown\"\nauthor: \"Frida Gomam\"\ndate: 2020-12-01T21:13:14-05:00\ncategories: [\"R\"]\ntags: [\"R Markdown\", \"plot\", \"regression\"]\noutput:\n  blogdown::html_page:\n    toc: true\n---\n\n&lt;script src=\"{{&lt; blogdown/postref &gt;}}index.en_files/header-attrs/header-attrs.js\"&gt;&lt;/script&gt;\n\n&lt;div id=\"TOC\"&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\"#r-markdown\"&gt;R Markdown&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"#including-plots\"&gt;Including Plots&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;\n\n&lt;div id=\"r-markdown\" class=\"section level2\"&gt;\n&lt;h2&gt;R Markdown&lt;/h2&gt;\n&lt;p&gt;This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see &lt;a href=\"http://rmarkdown.rstudio.com\" class=\"uri\"&gt;http://rmarkdown.rstudio.com&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;You can embed an R code chunk like this:&lt;/p&gt;\n&lt;pre class=\"r\"&gt;&lt;code&gt;summary(cars)\n##      speed           dist       \n##  Min.   : 4.0   Min.   :  2.00  \n##  1st Qu.:12.0   1st Qu.: 26.00  \n##  Median :15.0   Median : 36.00  \n##  Mean   :15.4   Mean   : 42.98  \n##  3rd Qu.:19.0   3rd Qu.: 56.00  \n##  Max.   :25.0   Max.   :120.00\nfit &lt;- lm(dist ~ speed, data = cars)\nfit\n## \n## Call:\n## lm(formula = dist ~ speed, data = cars)\n## \n## Coefficients:\n## (Intercept)        speed  \n##     -17.579        3.932&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;\n&lt;div id=\"including-plots\" class=\"section level2\"&gt;\n&lt;h2&gt;Including Plots&lt;/h2&gt;\n&lt;p&gt;You can also embed plots. See Figure &lt;a href=\"#fig:pie\"&gt;1&lt;/a&gt; for example:&lt;/p&gt;\n&lt;pre class=\"r\"&gt;&lt;code&gt;par(mar = c(0, 1, 0, 1))\npie(\n  c(280, 60, 20),\n  c(&#39;Sky&#39;, &#39;Sunny side of pyramid&#39;, &#39;Shady side of pyramid&#39;),\n  col = c(&#39;#0292D8&#39;, &#39;#F7EA39&#39;, &#39;#C4B632&#39;),\n  init.angle = -50, border = NA\n)&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=\"figure\"&gt;&lt;span id=\"fig:pie\"&gt;&lt;/span&gt;\n&lt;img src=\"{{&lt; blogdown/postref &gt;}}index.en_files/figure-html/pie-1.png\" alt=\"A fancy pie chart.\" width=\"672\" /&gt;\n&lt;p class=\"caption\"&gt;\nFigure 1: A fancy pie chart.\n&lt;/p&gt;\n&lt;/div&gt;\n&lt;/div&gt;\nTo narrow down where to look a little bit, I remove all parts not related to the TOC generated in the HTML file.\n&lt;div id=\"TOC\"&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\"#r-markdown\"&gt;R Markdown&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"#including-plots\"&gt;Including Plots&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;\nIn this part, we are interested in the div which includes the TOC and we can see that the id is \"TOC\".\nYou might not know and you will after reading this, but HUGO parses the headings from markdown (i.e., #, ##, etc.) and stores all those headings in an HTML structure (i.e., nav) with id=\"TableOfContents\".\nSeems familiar?! It is the HUGO variable seen earlier, which contains the TOC.\nTo know this, well you have to read HUGO’s documentation.\nAt this point, you might not see where all this is going.\nLet me clarify all the information we have:\n\nHUGO translate markdown files to HTML files.\nHUGO has a variable/id for the TOC, named TableOfContents\n\nWe can change the layout of the HUGO theme to include TOC (if the theme does not already include it as for “wowchemy/starter-hugo-academic”).\n\nIt works on plain markdown posts.\nIt does not on HTML posts produced from .Rmd files.\n\n\n\nIn conclusion, there is something wrong with the HTML files produced from .Rmd files."
  },
  {
    "objectID": "posts/2021-05-06-floating-toc-in-blogdown/index.html#fixing-.rmd.html-posts",
    "href": "posts/2021-05-06-floating-toc-in-blogdown/index.html#fixing-.rmd.html-posts",
    "title": "Add a Floating Table of Contents in blogdown\n",
    "section": "\n6 Fixing .Rmd/.html Posts",
    "text": "6 Fixing .Rmd/.html Posts\nblogdown provides an add-in to easily creates new post (blogdown:::new_post_addin()), in which you can decide what is the file format/extension you want to use.\nYou can change the default in your .Rprofile with, for example .Rmd, as your default using options(blogdown.ext = \".Rmd\").\nYou are probably (as I am) more familiar with the Rmd extension.\n\n\n.Rmd produces .html with rmarkdown::render_site().\nAnd the floating TOC is not working in that case.\n\n\nLet’s modify the extension to Rmarkdown.\n\n\n.Rmarkdown produces .markdown (basically the same as .md) with rmarkdown::render_site().\n\n\nIt works!\nWe have a floating TOC when using .Rmarkdown extension, thus when we do not use pandoc to translate markdown to HTML."
  },
  {
    "objectID": "posts/2021-05-06-floating-toc-in-blogdown/index.html#i-want-rmd-not-rmarkdown",
    "href": "posts/2021-05-06-floating-toc-in-blogdown/index.html#i-want-rmd-not-rmarkdown",
    "title": "Add a Floating Table of Contents in blogdown\n",
    "section": "\n7 I Want Rmd, not Rmarkdown!",
    "text": "7 I Want Rmd, not Rmarkdown!\nWe could only use .Rmarkdown file and stop right there, but what if we wanted to keep our favourite .Rmd extension everywhere?\nThe solution to this is quite simple!\n\nIn the .Rprofile at the root of your blogdown website, change the default rendering method to \"markdown\" using options(blogdown.method = \"markdown\").\nRestart R.\nYou are all set! rmarkdown::render_site() will only produce markdown file when used with blogdown."
  },
  {
    "objectID": "posts/2021-05-06-floating-toc-in-blogdown/index.html#conclusion",
    "href": "posts/2021-05-06-floating-toc-in-blogdown/index.html#conclusion",
    "title": "Add a Floating Table of Contents in blogdown\n",
    "section": "\n8 Conclusion",
    "text": "8 Conclusion\nIf you want a floating TOC, you should not generates HTML files from your Rmarkdown files and you need to add the HUGO variable .TableOfContents in the layout HTML file controlling the type of content you want the floating TOC to be.\nNote: To a more complete setup workflow for blogdown, I recommend to have a look at Alison Hill’s blog post: “Up & Running with Blogdown in 2021”."
  },
  {
    "objectID": "posts/2021-05-06-floating-toc-in-blogdown/index.html#going-in-style",
    "href": "posts/2021-05-06-floating-toc-in-blogdown/index.html#going-in-style",
    "title": "Add a Floating Table of Contents in blogdown\n",
    "section": "\n9 Going in Style",
    "text": "9 Going in Style\n\n\n\nMovie poster of “Going in Style” (IMDb).\n\n\nBecause, the TOC has an id which is TableOfContents, you can control the style of the TOC with (s)css (i.e., #TableOfContents!\nFor example, to get the left border going up including the “Contents” header.\n\n#TableOfContents, .docs-toc-title {\n  border-left: 1px solid $sta-primary;\n  /* \"$sta-primary\" is the primary colour from the theme (sass/scss) */\n}\n\nYou might also want to increase the width of the article container, because you now have TOC sharing the space with the article itself.\n\n.article-container {\n  max-width: 960px;\n}"
  },
  {
    "objectID": "posts/2025-05-05-just-for-test/index.html",
    "href": "posts/2025-05-05-just-for-test/index.html",
    "title": "A ggplot2 and gganimate Version of Pac-Man",
    "section": "",
    "text": "just for test\n\n\n\n Back to top"
  },
  {
    "objectID": "posts/2023-05-07-quarto-docker/index.html",
    "href": "posts/2023-05-07-quarto-docker/index.html",
    "title": "Quarto Q&A: How to publish your Quarto content as a Docker container?",
    "section": "",
    "text": "A new blog post of the “Quarto Q&A” series.\nThis time, I will show how to publish your Quarto project as a Docker container as light as possible."
  },
  {
    "objectID": "posts/2023-05-07-quarto-docker/index.html#the-questionproblem",
    "href": "posts/2023-05-07-quarto-docker/index.html#the-questionproblem",
    "title": "Quarto Q&A: How to publish your Quarto content as a Docker container?",
    "section": "1 The Question/Problem",
    "text": "1 The Question/Problem\nThere are different ways to publish a Quarto project, either if it is a document, a book or a website:\n\nQuarto Pub,\nGitHub Pages,\nPosit Connect,\nNetlify,\nConfluence.\n\nBut, what if you want to publish your Quarto project as a Docker container, as an app?"
  },
  {
    "objectID": "posts/2023-05-07-quarto-docker/index.html#the-answersolution",
    "href": "posts/2023-05-07-quarto-docker/index.html#the-answersolution",
    "title": "Quarto Q&A: How to publish your Quarto content as a Docker container?",
    "section": "2 The Answer/Solution",
    "text": "2 The Answer/Solution\nAgain, there are several ways to do it. I will show you one way to publish your Quarto project as a Docker container, as light as possible. To do so, I will use a Dockerfile with staged builds and a Quarto website project.\n\n2.1 Create a project\nFirst, I create a website using the Quarto CLI and add a code cell to the about.qmd file that uses the palmerpenguins  package.\nI will publish this Quarto project as a Docker container.\nquarto create-project --type website:blog mywebsite\ncd mywebsite\necho '```{r}\nlibrary(ggplot2)\nlibrary(palmerpenguins)\nggplot(penguins) +\n  aes(x = bill_length_mm, y = bill_depth_mm) +\n  geom_point(aes(colour = species)) +\n  geom_smooth(method = \"lm\", se = FALSE)\n```' &gt;&gt; about.qmd\n\n\n2.2 renv\nSee https://rstudio.github.io/renv/.\n\n2.2.1 Setup renv\nI am using renv to record the dependencies of the project1.\necho 'library(knitr)\nlibrary(rmarkdown)\nlibrary(ggplot2)\nlibrary(palmerpenguins)' &gt;&gt; _dependencies.R\nRscript -e 'install.packages(\"renv\")' -e \"renv::init()\"\nRscript -e \"renv::hydrate()\" -e \"renv::snapshot()\"\n\n\n2.2.2 The Dockerfile\nHere, I am using “build arguments” (i.e., ARGS) to specify the Quarto, the rig and the  versions.\nThis allows to change the versions without having to change the Dockerfile itself.\nARG QUARTO_VERSION=\"1.3.340\"\n\n1FROM ghcr.io/quarto-dev/quarto:${QUARTO_VERSION} AS builder\n\nARG RIG_VERSION=\"latest\"\nARG R_VERSION=\"release\"\nCOPY install-rig.sh /tmp/install-rig.sh\n2RUN bash /tmp/install-rig.sh \"${RIG_VERSION}\"\n3RUN rig add ${R_VERSION} && Rscript -e 'pak::pkg_install(\"renv\")'\n\n4COPY mywebsite /app\nWORKDIR /app\nRUN Rscript -e \"renv::restore()\"\n5RUN quarto render .\n\n6FROM httpd:alpine\n7COPY --from=builder /app/_site/ /usr/local/apache2/htdocs/\n\n1\n\nThe base Docker image used as the “builder”, i.e., the image with all requirements to build your Quarto project. Here it is the Quarto image which is an Ubuntu based image with Quarto pre-installed.\nThe “builder” stage is used to install the specified rig and  version, and to render the website.\n\n2\n\nThe install-rig.sh script is used to install the rig software.\n\n3\n\nUsing rig, we add the specified  version and install the renv package.\n\n4\n\nCopy the Quarto project into the /app directory of the “builder”.\n\n5\n\nRestore the lockfile created with pak and render the website with Quarto CLI.\n\n6\n\nThe second and last stage is based on the httpd:alpine image which is a light image with Apache pre-installed.\n\n7\n\nCopy the rendered website from the “builder” to the /usr/local/apache2/htdocs/ directory of the second stage image.\n\n\n\n\n\n2.3 pak\nSee https://pak.r-lib.org/.\n\n2.3.1 Setup pak\nAlternatively to renv, it’s also possible de record (and restore) the dependencies of a project2.\nRscript -e 'install.packages(\"pak\", repos = sprintf(\"https://r-lib.github.io/p/pak/stable/%s/%s/%s\", .Platform$pkgType, R.Version()$os, R.Version()$arch))'\nRscript -e 'pak::lockfile_create(c(\"knitr\", \"rmarkdown\", \"ggplot2\", \"palmerpenguins\"))'\n\n\n2.3.2 The Dockerfile\nAgain, I am using “build arguments” (i.e., ARGS) to specify the Quarto, the rig and the  versions.\nThis allows to change the versions without having to change the Dockerfile.\nARG QUARTO_VERSION=\"1.3.340\"\n\n1FROM ghcr.io/quarto-dev/quarto:${QUARTO_VERSION} AS builder\n\nARG RIG_VERSION=\"latest\"\nARG R_VERSION=\"release\"\nCOPY install-rig.sh /tmp/install-rig.sh\n2RUN bash /tmp/install-rig.sh \"${RIG_VERSION}\"\n3RUN rig add ${R_VERSION}\n\n4COPY mywebsite /app\nWORKDIR /app\n5RUN Rscript -e \"pak::lockfile_install()\" && quarto render .\n\n6FROM httpd:alpine\n7COPY --from=builder /app/_site/ /usr/local/apache2/htdocs/\n\n1\n\nThe base Docker image used as the “builder”, i.e., the image with all requirements to build your Quarto project. Here it is the Quarto image which is an Ubuntu based image with Quarto pre-installed.\nThe “builder” stage is used to install the specified rig and  version, and to render the website.\n\n2\n\nThe install-rig.sh script is used to install the rig software.\n\n3\n\nUsing rig, we add the specified  version which already includes pak.\n\n4\n\nCopy the Quarto project into the /app directory of the “builder”.\n\n5\n\nRestore the lockfile created with pak and render the website with Quarto CLI.\n\n6\n\nThe second and last stage is based on the httpd:alpine image which is a light image with Apache pre-installed.\n\n7\n\nCopy the rendered website from the “builder” to the /usr/local/apache2/htdocs/ directory of the second stage image.\n\n\n\n\n\n2.4 Build the image\nIt’s time to build the image using the Dockerfile and the docker buildx build command.\ndocker buildx build \\\n1--platform \"linux/amd64\" \\\n2--build-arg QUARTO_VERSION=1.3.340 \\\n3--tag \"mywebsite:1.0.0\" \\\n4--push \\\n.\n\n1\n\nThe platform to build the image for.\n\n2\n\nThe Quarto version to use when building the image.\n\n3\n\nThe tag to use to label the image, i.e., the name mywebsite and the version 1.0.0. This is useful to be able to identify the image later.\n\n4\n\n(Optional) Assuming you have access to a registry (docker login), push the image to the registry, such as Docker Hub.\n\n\n\n\n2.5 Deploy a container\nFinally, deploying locally the image as a Docker container using docker container run and access the website from your browser at http://localhost:8080.\ndocker container run \\\n1   --detach \\\n2   --platform \"linux/amd64\" \\\n3   --name mywebsite \\\n4   --publish 8080:80 \\\n5   mywebsite:1.0.0\n\n1\n\nThe container in detached mode, i.e., the container runs in the background.\n\n2\n\nThe platform to run the container on, i.e., same as the platform used to build the image in this case.\n\n3\n\nThe name of the container for easy identification, i.e., mywebsite.\n\n4\n\nThe port mapping, i.e., we publish the port 8080 of the host to the port 80 of the container. This is useful to be able to access the website from the host.\n\n5\n\nThe image to use to run the container, i.e., mywebsite:1.0.0."
  },
  {
    "objectID": "posts/2023-05-07-quarto-docker/index.html#footnotes",
    "href": "posts/2023-05-07-quarto-docker/index.html#footnotes",
    "title": "Quarto Q&A: How to publish your Quarto content as a Docker container?",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nSee renv documentation for more information on snapshotting dependencies.↩︎\nSee pak documentation for more information on snapshotting dependencies.↩︎"
  },
  {
    "objectID": "posts/2020-05-06-ggpacman/index.html",
    "href": "posts/2020-05-06-ggpacman/index.html",
    "title": "A ggplot2 and gganimate Version of Pac-Man",
    "section": "",
    "text": "It started on a Saturday evening …\nIt was the 21st of March (for the sake of precision), around 10 pm CET (also for the sake of precision and mostly because it is not relevant). I was playing around with my data on ‘all’ the movies I have seen so far (mcanouil/imdb-ratings) and looking on possibly new ideas of visualisation on twitter using #ggplot2 and #gganimate (by the way the first time I played with gganimate was at useR-2018 (Brisbane, Australia), just before and when @thomasp85 released the actual framework). The only thing on the feed was “contaminated/deaths and covid-19” curves made with ggplot2 and a few with gganimate … Let’s say, it was not as funny and interesting as I was hoping for … Then, I’ve got an idea, what if I can do something funny and not expected with ggplot2 and gganimate? My first thought, was let’s draw and animate Pac-Man, that should not be that hard!\nWell, it was not that easy after-all … But, I am going to go through my code here (you might be interested to actually look at the commits history."
  },
  {
    "objectID": "posts/2020-05-06-ggpacman/index.html#the-story-of-ggpacman",
    "href": "posts/2020-05-06-ggpacman/index.html#the-story-of-ggpacman",
    "title": "A ggplot2 and gganimate Version of Pac-Man",
    "section": "",
    "text": "It started on a Saturday evening …\nIt was the 21st of March (for the sake of precision), around 10 pm CET (also for the sake of precision and mostly because it is not relevant). I was playing around with my data on ‘all’ the movies I have seen so far (mcanouil/imdb-ratings) and looking on possibly new ideas of visualisation on twitter using #ggplot2 and #gganimate (by the way the first time I played with gganimate was at useR-2018 (Brisbane, Australia), just before and when @thomasp85 released the actual framework). The only thing on the feed was “contaminated/deaths and covid-19” curves made with ggplot2 and a few with gganimate … Let’s say, it was not as funny and interesting as I was hoping for … Then, I’ve got an idea, what if I can do something funny and not expected with ggplot2 and gganimate? My first thought, was let’s draw and animate Pac-Man, that should not be that hard!\nWell, it was not that easy after-all … But, I am going to go through my code here (you might be interested to actually look at the commits history."
  },
  {
    "objectID": "posts/2020-05-06-ggpacman/index.html#the-r-packages",
    "href": "posts/2020-05-06-ggpacman/index.html#the-r-packages",
    "title": "A ggplot2 and gganimate Version of Pac-Man",
    "section": "\n2 The R packages",
    "text": "2 The R packages\n\nlibrary(\"stats\")\nlibrary(\"utils\")\nlibrary(\"rlang\")\nlibrary(\"magrittr\")\nlibrary(\"dplyr\")\nlibrary(\"tidyr\")\nlibrary(\"purrr\")\nlibrary(\"ggplot2\")\nlibrary(\"ggforce\")\nlibrary(\"gganimate\")\nlibrary(\"ggtext\")"
  },
  {
    "objectID": "posts/2020-05-06-ggpacman/index.html#the-maze-layer",
    "href": "posts/2020-05-06-ggpacman/index.html#the-maze-layer",
    "title": "A ggplot2 and gganimate Version of Pac-Man",
    "section": "\n3 The maze layer",
    "text": "3 The maze layer\n\n3.1 The base layer\nFirst thing first, I needed to set-up the base layer, meaning, the maze from Pac-Man. I did start by setting the coordinates of the maze.\n\nbase_layer &lt;- ggplot() +\n  theme_void() +\n  theme(\n    legend.position = \"none\",\n    plot.background = element_rect(fill = \"black\", colour = \"black\"),\n    panel.background = element_rect(fill = \"black\", colour = \"black\"),\n  ) +\n  coord_fixed(xlim = c(0, 20), ylim = c(0, 26))\n\nFor later use, I defined some scales (actually those scales, where defined way after chronologically speaking). I am using those to define sizes and colours for all the geometries I am going to use to achieve the Pac-Man GIF.\n\nmap_colours &lt;- c(\n  \"READY!\" = \"goldenrod1\",\n  \"wall\" = \"dodgerblue3\", \"door\" = \"dodgerblue3\",\n  \"normal\" = \"goldenrod1\", \"big\" = \"goldenrod1\", \"eaten\" = \"black\",\n  \"Pac-Man\" = \"yellow\",\n  \"eye\" = \"white\", \"iris\" = \"black\",\n  \"Blinky\" = \"red\", \"Blinky_weak\" = \"blue\", \"Blinky_eaten\" = \"transparent\",\n  \"Pinky\" = \"pink\", \"Pinky_weak\" = \"blue\", \"Pinky_eaten\" = \"transparent\",\n  \"Inky\" = \"cyan\", \"Inky_weak\" = \"blue\", \"Inky_eaten\" = \"transparent\",\n  \"Clyde\" = \"orange\", \"Clyde_weak\" = \"blue\", \"Clyde_eaten\" = \"transparent\"\n)\n\n\nbase_layer &lt;- base_layer +\n  scale_size_manual(values = c(\"wall\" = 2.5, \"door\" = 1, \"big\" = 2.5, \"normal\" = 0.5, \"eaten\" = 3)) +\n  scale_fill_manual(breaks = names(map_colours), values = map_colours) +\n  scale_colour_manual(breaks = names(map_colours), values = map_colours)\n\n\n\n\n\n\n\n\n\nMy base_layer here is not really helpful, so I temporarily added some elements to help me draw everything on it. Note: I won’t use it in the following.\n\nbase_layer +\n  scale_x_continuous(breaks = 0:21, sec.axis = dup_axis()) +\n  scale_y_continuous(breaks = 0:26, sec.axis = dup_axis()) +\n  theme(\n    panel.grid.major = element_line(colour = \"white\"),\n    axis.text = element_text(colour = \"white\")\n  ) +\n  annotate(\"rect\", xmin = 0, xmax = 21, ymin = 0, ymax = 26, fill = NA)\n\n\n\n\n\n\n\nQuite better, isn’t it?!\n\n3.2 The grid layer\nHere, I am calling “grid”, the walls of the maze. For this grid, I started drawing the vertical lines on the left side of the maze (as you may have noticed, the first level is symmetrical).\n\nleft_vertical_segments &lt;- tribble(\n  ~x, ~y, ~xend, ~yend,\n  0, 0, 0, 9,\n  0, 17, 0, 26,\n  2, 4, 2, 5,\n  2, 19, 2, 20,\n  2, 22, 2, 24,\n  4, 4, 4, 7,\n  4, 9, 4, 12,\n  4, 14, 4, 17,\n  4, 19, 4, 20,\n  4, 22, 4, 24,\n  6, 2, 6, 5,\n  6, 9, 6, 12,\n  6, 14, 6, 20,\n  6, 22, 6, 24,\n  8, 4, 8, 5,\n  8, 9, 8, 10,\n  8, 12, 8, 15,\n  8, 19, 8, 20,\n  8, 22, 8, 24\n)\n\n\nbase_layer +\n  geom_segment(\n    data = left_vertical_segments,\n    mapping = aes(x = x, y = y, xend = xend, yend = yend),\n    lineend = \"round\",\n    inherit.aes = FALSE,\n    colour = \"white\"\n  )\n\n\n\n\n\n\n\nThen, I added the horizontal lines (still only on the left side of the maze)!\n\nleft_horizontal_segments &lt;- tribble(\n  ~x, ~y, ~xend, ~yend,\n  0, 0, 10, 0,\n  2, 2, 8, 2,\n  0, 4, 2, 4,\n  8, 4, 10, 4,\n  0, 5, 2, 5,\n  8, 5, 10, 5,\n  2, 7, 4, 7,\n  6, 7, 8, 7,\n  0, 9, 4, 9,\n  8, 9, 10, 9,\n  8, 10, 10, 10,\n  0, 12, 4, 12,\n  8, 12, 10, 12,\n  0, 14, 4, 14,\n  8, 15, 9, 15,\n  0, 17, 4, 17,\n  6, 17, 8, 17,\n  2, 19, 4, 19,\n  8, 19, 10, 19,\n  2, 20, 4, 20,\n  8, 20, 10, 20,\n  2, 22, 4, 22,\n  6, 22, 8, 22,\n  2, 24, 4, 24,\n  6, 24, 8, 24,\n  0, 26, 10, 26\n)\n\nleft_segments &lt;- bind_rows(left_vertical_segments, left_horizontal_segments)\n\n\nbase_layer +\n  geom_segment(\n    data = left_segments,\n    mapping = aes(x = x, y = y, xend = xend, yend = yend),\n    lineend = \"round\",\n    inherit.aes = FALSE,\n    colour = \"white\"\n  )\n\n\n\n\n\n\n\nThe maze is slowly appearing, but surely. As I wrote earlier, the first level is symmetrical, so I used my left lines left_segments to compute all the lines on the right right_segments.\n\nright_segments &lt;-  mutate(\n  .data = left_segments,\n  x = abs(x - 20),\n  xend = abs(xend - 20)\n)\n\n\nbase_layer +\n  geom_segment(\n    data = bind_rows(left_segments, right_segments),\n    mapping = aes(x = x, y = y, xend = xend, yend = yend),\n    lineend = \"round\",\n    inherit.aes = FALSE,\n    colour = \"white\"\n  )\n\n\n\n\n\n\n\nThe middle vertical lines were missing, i.e., I did not want to plot them twice, which would have happen, if I added these in left_segments. Also, the “door” of the ghost spawn area is missing. I added the door and the missing vertical walls in the end.\n\ncentre_vertical_segments &lt;- tribble(\n  ~x, ~y, ~xend, ~yend,\n  10, 2, 10, 4,\n  10, 7, 10, 9,\n  10, 17, 10, 19,\n  10, 22, 10, 26\n)\ndoor_segment &lt;- tibble(x = 9, y = 15, xend = 11, yend = 15, type = \"door\")\n\nFinally, I combined all the segments and drew them all.\n\nmaze_walls &lt;- bind_rows(\n  left_segments,\n  centre_vertical_segments,\n  right_segments\n) %&gt;%\n  mutate(type = \"wall\") %&gt;%\n  bind_rows(door_segment)\n\n\nbase_layer +\n  geom_segment(\n    data = maze_walls,\n    mapping = aes(x = x, y = y, xend = xend, yend = yend),\n    lineend = \"round\",\n    inherit.aes = FALSE,\n    colour = \"white\"\n  )\n\n\n\n\n\n\n\nThe maze is now complete, but no-one can actually see the door, since it appears the same way as the walls. You may have noticed, I added a column named type. type can currently hold two values: \"wall\" and \"door\". I am going to use type as values for two aesthetics, you may already have guessed which ones. The answer is the colour and size aesthetics.\n\nbase_layer +\n  geom_segment(\n    data = maze_walls,\n    mapping = aes(x = x, y = y, xend = xend, yend = yend, colour = type, size = type),\n    lineend = \"round\",\n    inherit.aes = FALSE\n  )\n\n\n\n\n\n\n\nNote: maze_walls is a dataset of ggpacman (data(\"maze_walls\", package = \"ggpacman\")).\n\n3.3 The bonus points layer\nThe strategy was quite the same as for the grid layer:\n\nSetting up the point coordinates for the left side and the middle.\nCompute the coordinates for the right side.\nUse a column type for the two types of bonus points, i.e., \"normal\" and \"big\" (the one who weaken the ghosts).\n\n\nbonus_points_coord &lt;- function() {\n  left_bonus_points &lt;- tribble(\n    ~x, ~y, ~type,\n    1, c(1:3, 7:8, 18:22, 24:25), \"normal\",\n    1, c(6, 23), \"big\",\n    2, c(1, 3, 6, 8, 18, 21, 25), \"normal\",\n    3, c(1, 3:6, 8, 18, 21, 25), \"normal\",\n    4, c(1, 3, 8, 18, 21, 25), \"normal\",\n    5, c(1, 3:25), \"normal\",\n    6, c(1, 6, 8, 21, 25), \"normal\",\n    7, c(1, 3:6, 8, 18:21, 25), \"normal\",\n    8, c(1, 3, 6, 8, 18, 21, 25), \"normal\",\n    9, c(1:3, 6:8, 18, 21:25), \"normal\"\n  )\n\n  bind_rows(\n    left_bonus_points,\n    tribble(\n      ~x, ~y, ~type,\n      10, c(1, 21), \"normal\"\n    ),\n    mutate(left_bonus_points, x = abs(x - 20))\n  ) %&gt;%\n    unnest(\"y\")\n}\nmaze_points &lt;- bonus_points_coord()\n\n\nmaze_layer &lt;- base_layer +\n  geom_segment(\n    data = maze_walls,\n    mapping = aes(x = x, y = y, xend = xend, yend = yend, colour = type, size = type),\n    lineend = \"round\",\n    inherit.aes = FALSE\n  ) +\n  geom_point(\n    data = maze_points,\n    mapping = aes(x = x, y = y, size = type, colour = type),\n    inherit.aes = FALSE\n  )\n\n\n\n\n\n\n\n\n\nNote: maze_points is a dataset of ggpacman (data(\"maze_points\", package = \"ggpacman\"))."
  },
  {
    "objectID": "posts/2020-05-06-ggpacman/index.html#pac-man-character",
    "href": "posts/2020-05-06-ggpacman/index.html#pac-man-character",
    "title": "A ggplot2 and gganimate Version of Pac-Man",
    "section": "\n4 Pac-Man character",
    "text": "4 Pac-Man character\nIt is now time to draw the main character. To draw Pac-Man, I needed few things:\n\n\nThe Pac-Man moves, i.e., all the coordinates where Pac-Man is supposed to be at every step.\n\ndata(\"pacman\", package = \"ggpacman\")\nunnest(pacman, c(\"x\", \"y\"))\n#&gt; # A tibble: 150 × 3\n#&gt;        x     y colour \n#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  \n#&gt;  1    10     6 Pac-Man\n#&gt;  2    10     6 Pac-Man\n#&gt;  3    10     6 Pac-Man\n#&gt;  4    10     6 Pac-Man\n#&gt;  5    10     6 Pac-Man\n#&gt;  6    10     6 Pac-Man\n#&gt;  7    10     6 Pac-Man\n#&gt;  8    10     6 Pac-Man\n#&gt;  9    10     6 Pac-Man\n#&gt; 10    10     6 Pac-Man\n#&gt; # … with 140 more rows\n\n\nmaze_layer +\n  geom_point(\n    data = unnest(pacman, c(\"x\", \"y\")),\n    mapping = aes(x = x, y = y, colour = colour),\n    size = 4\n  )\n\n\n\n\n\n\n\n\n\nThe Pac-Man shape (open and closed mouth). Since, Pac-Man is not a complete circle shape, I used geom_arc_bar() (from ggforce), and defined the properties of each state of Pac-Man based on the aesthetics required by this function. Note: At first, I wanted a smooth animation/transition ofPac-Man opening and closing its mouth, this is why there arefour \"close_\" states.\n\npacman_state &lt;- tribble(\n  ~state, ~start, ~end,\n  \"open_right\", 14 / 6 * pi, 4 / 6 * pi,\n  \"close_right\", 15 / 6 * pi, 3 / 6 * pi,\n  \"open_up\", 11 / 6 * pi, 1 / 6 * pi,\n  \"close_up\", 12 / 3 * pi, 0 / 6 * pi,\n  \"open_left\", 8 / 6 * pi, - 2 / 6 * pi,\n  \"close_left\", 9 / 6 * pi, - 3 / 6 * pi,\n  \"open_down\", 5 / 6 * pi, - 5 / 6 * pi,\n  \"close_down\", pi, - pi\n)\n\n\nggplot() +\n  geom_arc_bar(\n    data = pacman_state,\n    mapping = aes(x0 = 0, y0 = 0, r0 = 0, r = 0.5, start =start, end = end),\n    fill = \"yellow\",\n    inherit.aes = FALSE\n  ) +\n  facet_wrap(vars(state), ncol = 4)\n\n\n\n\n\n\n\n\n\n\n\n\n\nOnce those things available, how to make Pac-Man look where he is headed? Short answer, I just computed the differences between two successive positions of Pac-Man and added both open/close state to a new column state.\n\npacman %&gt;%\n  unnest(c(\"x\", \"y\")) %&gt;%\n  mutate(\n    state_x = sign(x - lag(x)),\n    state_y = sign(y - lag(y)),\n    state = case_when(\n      (is.na(state_x) | state_x %in% 0) & (is.na(state_y) | state_y %in% 0) ~ list(c(\"open_right\", \"close_right\")),\n      state_x == 1 & state_y == 0 ~ list(c(\"open_right\", \"close_right\")),\n      state_x == -1 & state_y == 0 ~ list(c(\"open_left\", \"close_left\")),\n      state_x == 0 & state_y == -1 ~ list(c(\"open_down\", \"close_down\")),\n      state_x == 0 & state_y == 1 ~ list(c(\"open_up\", \"close_up\"))\n    )\n  )  %&gt;%\n  unnest(\"state\")\n#&gt; # A tibble: 300 × 6\n#&gt;        x     y colour  state_x state_y state      \n#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;      \n#&gt;  1    10     6 Pac-Man      NA      NA open_right \n#&gt;  2    10     6 Pac-Man      NA      NA close_right\n#&gt;  3    10     6 Pac-Man       0       0 open_right \n#&gt;  4    10     6 Pac-Man       0       0 close_right\n#&gt;  5    10     6 Pac-Man       0       0 open_right \n#&gt;  6    10     6 Pac-Man       0       0 close_right\n#&gt;  7    10     6 Pac-Man       0       0 open_right \n#&gt;  8    10     6 Pac-Man       0       0 close_right\n#&gt;  9    10     6 Pac-Man       0       0 open_right \n#&gt; 10    10     6 Pac-Man       0       0 close_right\n#&gt; # … with 290 more rows\n\nHere, in preparation for gganimate, I also added a column step before merging the new upgraded pacman (i.e., with the Pac-Man state column) with the pacman_state defined earlier.\n\npacman_moves &lt;- ggpacman::compute_pacman_coord(pacman)\n\n\n#&gt; # A tibble: 300 × 9\n#&gt;        x     y colour  state_x state_y state        step start   end\n#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;       &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;\n#&gt;  1    10     6 Pac-Man      NA      NA open_right      1  7.33  2.09\n#&gt;  2    10     6 Pac-Man      NA      NA close_right     2  7.85  1.57\n#&gt;  3    10     6 Pac-Man       0       0 open_right      3  7.33  2.09\n#&gt;  4    10     6 Pac-Man       0       0 close_right     4  7.85  1.57\n#&gt;  5    10     6 Pac-Man       0       0 open_right      5  7.33  2.09\n#&gt;  6    10     6 Pac-Man       0       0 close_right     6  7.85  1.57\n#&gt;  7    10     6 Pac-Man       0       0 open_right      7  7.33  2.09\n#&gt;  8    10     6 Pac-Man       0       0 close_right     8  7.85  1.57\n#&gt;  9    10     6 Pac-Man       0       0 open_right      9  7.33  2.09\n#&gt; 10    10     6 Pac-Man       0       0 close_right    10  7.85  1.57\n#&gt; # … with 290 more rows\n\n\nmaze_layer +\n  geom_arc_bar(\n    data = pacman_moves,\n    mapping = aes(x0 = x, y0 = y, r0 = 0, r = 0.5, start = start, end = end, colour = colour, fill = colour, group = step),\n    inherit.aes = FALSE\n  )\n\n\n\n\n\n\n\nYou can’t see much?! Ok, perhaps it’s time to use gganimate. I am going to animate Pac-Man based on the column step, which is, if you looked at the code above, just the line number of pacman_moves.\n\nanimated_pacman &lt;- maze_layer +\n  geom_arc_bar(\n    data = pacman_moves,\n    mapping = aes(x0 = x, y0 = y, r0 = 0, r = 0.5, start = start, end = end, colour = colour, fill = colour, group = step),\n    inherit.aes = FALSE\n  ) +\n  transition_manual(step)\n\n\n\n\n\n\n\n\n\nNote: pacman is a dataset of ggpacman (data(\"pacman\", package = \"ggpacman\"))."
  },
  {
    "objectID": "posts/2020-05-06-ggpacman/index.html#the-ghosts-characters",
    "href": "posts/2020-05-06-ggpacman/index.html#the-ghosts-characters",
    "title": "A ggplot2 and gganimate Version of Pac-Man",
    "section": "\n5 The Ghosts characters",
    "text": "5 The Ghosts characters\nTime to draw the ghosts, namely: Blinky, Pinky, Inky and Clyde.\n\n5.1 Body\nI started with the body, especially the top and the bottom part of the ghost which are half circle (or at least I chose this) and use again geom_arc_bar().\n\nghost_arc &lt;- tribble(\n  ~x0, ~y0, ~r, ~start, ~end, ~part,\n  0, 0, 0.5, - 1 * pi / 2, 1 * pi / 2, \"top\",\n  -0.5, -0.5 + 1/6, 1 / 6,  pi / 2, 2 * pi / 2, \"bottom\",\n  -1/6, -0.5 + 1/6, 1 / 6,  pi / 2, 3 * pi / 2, \"bottom\",\n  1/6, -0.5 + 1/6, 1 / 6,  pi / 2, 3 * pi / 2, \"bottom\",\n  0.5, -0.5 + 1/6, 1 / 6,  3 * pi / 2,  2 * pi / 2, \"bottom\"\n)\n\n\ntop &lt;- ggplot() +\n  geom_arc_bar(\n    data = ghost_arc[1, ],\n    mapping = aes(x0 = x0, y0 = y0, r0 = 0, r = r, start = start, end = end)\n  ) +\n  coord_fixed(xlim = c(-1, 1), ylim = c(-1, 1))\n\n\n\n\n\n\n\n\n\nI retrieved the coordinates of the created polygon, using ggplot_build().\n\ntop_polygon &lt;- ggplot_build(top)$data[[1]][, c(\"x\", \"y\")]\n\nAnd I proceeded the same way for the bottom part of the ghost.\n\nbottom &lt;- ggplot() +\n  geom_arc_bar(\n    data = ghost_arc[-1, ],\n        mapping = aes(x0 = x0, y0 = y0, r0 = 0, r = r, start = start, end = end)\n  ) +\n  coord_fixed(xlim = c(-1, 1), ylim = c(-1, 1))\n\n\n\n\n\n\n\n\n\n\nbottom_polygon &lt;- ggplot_build(bottom)$data[[1]][, c(\"x\", \"y\")]\n\nThen, I just added one point to “properly” link the top and the bottom part.\n\nghost_body &lt;- dplyr::bind_rows(\n  top_polygon,\n  dplyr::tribble(\n    ~x, ~y,\n    0.5, 0,\n    0.5, -0.5 + 1/6\n  ),\n  bottom_polygon,\n  dplyr::tribble(\n    ~x, ~y,\n    -0.5, -0.5 + 1/6,\n    -0.5, 0\n  )\n)\n\nI finally got the whole ghost shape I was looking for.\n\nggplot() +\n  coord_fixed(xlim = c(-1, 1), ylim = c(-1, 1)) +\n  geom_polygon(\n    data = ghost_body,\n    mapping = aes(x = x, y = y),\n    inherit.aes = FALSE\n  )\n\n\n\n\n\n\n\nNote: ghost_body is a dataset of ggpacman (data(\"ghost_body\", package = \"ggpacman\")).Note: ghost_body definitely needs some code refactoring.\n\n5.2 Eyes\nThe eyes are quite easy to draw, they are just circles, but … As for Pac-Man before, I wanted the ghosts to look where they are headed. This implies moving the iris one way or the other, and so I defined five states for the iris: right, down, left, up and middle.\n\nghost_eyes &lt;- tribble(\n  ~x0, ~y0, ~r, ~part, ~direction,\n  1/5, 1/8, 1/8, \"eye\", c(\"up\", \"down\", \"right\", \"left\", \"middle\"),\n  -1/5, 1/8, 1/8, \"eye\", c(\"up\", \"down\", \"right\", \"left\", \"middle\"),\n  5/20, 1/8, 1/20, \"iris\", \"right\",\n  -3/20, 1/8, 1/20, \"iris\", \"right\",\n  1/5, 1/16, 1/20, \"iris\", \"down\",\n  -1/5, 1/16, 1/20, \"iris\", \"down\",\n  3/20, 1/8, 1/20, \"iris\", \"left\",\n  -5/20, 1/8, 1/20, \"iris\", \"left\",\n  1/5, 3/16, 1/20, \"iris\", \"up\",\n  -1/5, 3/16, 1/20, \"iris\", \"up\",\n  1/5, 1/8, 1/20, \"iris\", \"middle\",\n  -1/5, 1/8, 1/20, \"iris\", \"middle\"\n) %&gt;%\n  unnest(\"direction\")\n\n\nmap_eyes &lt;- c(\"eye\" = \"white\", \"iris\" = \"black\")\nggplot() +\n  coord_fixed(xlim = c(-0.5, 0.5), ylim = c(-0.5, 0.5)) +\n  scale_fill_manual(breaks = names(map_eyes), values = map_eyes) +\n  scale_colour_manual(breaks = names(map_eyes), values = map_eyes) +\n  geom_circle(\n    data = ghost_eyes,\n    mapping = aes(x0 = x0, y0 = y0, r = r, colour = part, fill = part),\n    inherit.aes = FALSE,\n    show.legend = FALSE\n  ) +\n  facet_wrap(vars(direction), ncol = 3)\n\n\n\n\n\n\n\nNote: ghost_eyes is a dataset of ggpacman (data(\"ghost_eyes\", package = \"ggpacman\")).\n\n5.3 Ghost shape\nI had the whole ghost shape and the eyes.\n\nggplot() +\n  coord_fixed(xlim = c(-1, 1), ylim = c(-1, 1)) +\n  scale_fill_manual(breaks = names(map_colours), values = map_colours) +\n  scale_colour_manual(breaks = names(map_colours), values = map_colours) +\n  geom_polygon(\n    data = get(data(\"ghost_body\", package = \"ggpacman\")),\n    mapping = aes(x = x, y = y),\n    inherit.aes = FALSE\n  ) +\n  geom_circle(\n    data = get(data(\"ghost_eyes\", package = \"ggpacman\")),\n    mapping = aes(x0 = x0, y0 = y0, r = r, colour = part, fill = part),\n    inherit.aes = FALSE,\n    show.legend = FALSE\n  ) +\n  facet_wrap(vars(direction), ncol = 3)\n\n\n\n\n\n\n\nAgain, same as for Pac-Man, in order to know where the ghosts are supposed to look, I computed the differences of each successive positions of the ghosts and I added the corresponding directions.\n\nblinky_ghost &lt;- tibble(x = c(0, 1, 1, 0, 0), y = c(0, 0, 1, 1, 0), colour = \"Blinky\") %&gt;%\n  unnest(c(\"x\", \"y\")) %&gt;%\n  mutate(\n    X0 = x,\n    Y0 = y,\n    state_x = sign(round(x) - lag(round(x))),\n    state_y = sign(round(y) - lag(round(y))),\n    direction = case_when(\n      (is.na(state_x) | state_x %in% 0) & (is.na(state_y) | state_y %in% 0) ~ \"middle\",\n      state_x == 1 & state_y == 0 ~ \"right\",\n      state_x == -1 & state_y == 0 ~ \"left\",\n      state_x == 0 & state_y == -1 ~ \"down\",\n      state_x == 0 & state_y == 1 ~ \"up\"\n    )\n  ) %&gt;%\n  unnest(\"direction\")\n\n\n#&gt; # A tibble: 5 × 8\n#&gt;       x     y colour    X0    Y0 state_x state_y direction\n#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    \n#&gt; 1     0     0 Blinky     0     0      NA      NA middle   \n#&gt; 2     1     0 Blinky     1     0       1       0 right    \n#&gt; 3     1     1 Blinky     1     1       0       1 up       \n#&gt; 4     0     1 Blinky     0     1      -1       0 left     \n#&gt; 5     0     0 Blinky     0     0       0      -1 down\n\nI also added some noise around the position, i.e., four noised position at each actual position of a ghost.\n\nblinky_ghost &lt;- blinky_ghost %&gt;%\n  mutate(state = list(1:4)) %&gt;%\n  unnest(\"state\") %&gt;%\n  mutate(\n    step = 1:n(),\n    noise_x = rnorm(n(), mean = 0, sd = 0.05),\n    noise_y = rnorm(n(), mean = 0, sd = 0.05)\n  )\n\n\n#&gt; # A tibble: 20 × 12\n#&gt;        x     y colour    X0    Y0 state_x state_y direction state  step  noise_x\n#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;\n#&gt;  1     0     0 Blinky     0     0      NA      NA middle        1     1  0.0586 \n#&gt;  2     0     0 Blinky     0     0      NA      NA middle        2     2  0.0619 \n#&gt;  3     0     0 Blinky     0     0      NA      NA middle        3     3 -0.0552 \n#&gt;  4     0     0 Blinky     0     0      NA      NA middle        4     4  0.0196 \n#&gt;  5     1     0 Blinky     1     0       1       0 right         1     5  0.0342 \n#&gt;  6     1     0 Blinky     1     0       1       0 right         2     6 -0.0173 \n#&gt;  7     1     0 Blinky     1     0       1       0 right         3     7  0.0616 \n#&gt;  8     1     0 Blinky     1     0       1       0 right         4     8 -0.0979 \n#&gt;  9     1     1 Blinky     1     1       0       1 up            1     9  0.0481 \n#&gt; 10     1     1 Blinky     1     1       0       1 up            2    10  0.0540 \n#&gt; 11     1     1 Blinky     1     1       0       1 up            3    11  0.0445 \n#&gt; 12     1     1 Blinky     1     1       0       1 up            4    12  0.0641 \n#&gt; 13     0     1 Blinky     0     1      -1       0 left          1    13 -0.0431 \n#&gt; 14     0     1 Blinky     0     1      -1       0 left          2    14  0.00634\n#&gt; 15     0     1 Blinky     0     1      -1       0 left          3    15 -0.0333 \n#&gt; 16     0     1 Blinky     0     1      -1       0 left          4    16 -0.0391 \n#&gt; 17     0     0 Blinky     0     0       0      -1 down          1    17  0.0164 \n#&gt; 18     0     0 Blinky     0     0       0      -1 down          2    18 -0.00357\n#&gt; 19     0     0 Blinky     0     0       0      -1 down          3    19 -0.0166 \n#&gt; 20     0     0 Blinky     0     0       0      -1 down          4    20 -0.0298 \n#&gt; # … with 1 more variable: noise_y &lt;dbl&gt;\n\nThen, I added (in a weird way I might say) the polygons coordinates for the body and the eyes.\n\nblinky_ghost &lt;- blinky_ghost %&gt;%\n  mutate(\n    body = pmap(\n      .l = list(x, y, noise_x, noise_y),\n      .f = function(.x, .y, .noise_x, .noise_y) {\n        mutate(\n          .data = get(data(\"ghost_body\")),\n          x = x + .x + .noise_x,\n          y = y + .y + .noise_y\n        )\n      }\n    ),\n    eyes = pmap(\n      .l = list(x, y, noise_x, noise_y, direction),\n      .f = function(.x, .y, .noise_x, .noise_y, .direction) {\n        mutate(\n          .data = filter(get(data(\"ghost_eyes\")), direction == .direction),\n          x0 = x0 + .x + .noise_x,\n          y0 = y0 + .y + .noise_y,\n          direction = NULL\n        )\n      }\n    ),\n    x = NULL,\n    y = NULL\n  )\n\n\n#&gt; # A tibble: 20 × 12\n#&gt;    colour    X0    Y0 state_x state_y direction state  step  noise_x  noise_y\n#&gt;    &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;    &lt;dbl&gt;\n#&gt;  1 Blinky     0     0      NA      NA middle        1     1  0.0586  -0.0504 \n#&gt;  2 Blinky     0     0      NA      NA middle        2     2  0.0619  -0.00298\n#&gt;  3 Blinky     0     0      NA      NA middle        3     3 -0.0552   0.0317 \n#&gt;  4 Blinky     0     0      NA      NA middle        4     4  0.0196  -0.104  \n#&gt;  5 Blinky     1     0       1       0 right         1     5  0.0342   0.0781 \n#&gt;  6 Blinky     1     0       1       0 right         2     6 -0.0173   0.00306\n#&gt;  7 Blinky     1     0       1       0 right         3     7  0.0616   0.0107 \n#&gt;  8 Blinky     1     0       1       0 right         4     8 -0.0979  -0.0575 \n#&gt;  9 Blinky     1     1       0       1 up            1     9  0.0481  -0.0265 \n#&gt; 10 Blinky     1     1       0       1 up            2    10  0.0540  -0.0886 \n#&gt; 11 Blinky     1     1       0       1 up            3    11  0.0445  -0.0244 \n#&gt; 12 Blinky     1     1       0       1 up            4    12  0.0641  -0.0399 \n#&gt; 13 Blinky     0     1      -1       0 left          1    13 -0.0431   0.0715 \n#&gt; 14 Blinky     0     1      -1       0 left          2    14  0.00634  0.0267 \n#&gt; 15 Blinky     0     1      -1       0 left          3    15 -0.0333  -0.0453 \n#&gt; 16 Blinky     0     1      -1       0 left          4    16 -0.0391   0.0148 \n#&gt; 17 Blinky     0     0       0      -1 down          1    17  0.0164   0.0367 \n#&gt; 18 Blinky     0     0       0      -1 down          2    18 -0.00357  0.0986 \n#&gt; 19 Blinky     0     0       0      -1 down          3    19 -0.0166  -0.0322 \n#&gt; 20 Blinky     0     0       0      -1 down          4    20 -0.0298   0.0287 \n#&gt; # … with 2 more variables: body &lt;list&gt;, eyes &lt;list&gt;\n\nFor ease, it is now a call to one function directly on the position matrix of a ghost.\n\nblinky_ghost &lt;- tibble(x = c(0, 1, 1, 0, 0), y = c(0, 0, 1, 1, 0), colour = \"Blinky\")\nblinky_moves &lt;- ggpacman::compute_ghost_coord(blinky_ghost)\n\n\nblinky_plot &lt;- base_layer +\n  coord_fixed(xlim = c(-1, 2), ylim = c(-1, 2)) +\n  geom_polygon(\n    data = unnest(blinky_moves, \"body\"),\n    mapping = aes(x = x, y = y, fill = colour, colour = colour, group = step),\n    inherit.aes = FALSE\n  ) +\n  geom_circle(\n    data = unnest(blinky_moves, \"eyes\"),\n    mapping = aes(x0 = x0, y0 = y0, r = r, colour = part, fill = part, group = step),\n    inherit.aes = FALSE\n  )\n\n\n\n\n\n\n\n\n\nAgain, it is better with an animated GIF.\n\nanimated_blinky &lt;- blinky_plot + transition_manual(step)"
  },
  {
    "objectID": "posts/2020-05-06-ggpacman/index.html#how-pac-man-interacts-with-the-maze",
    "href": "posts/2020-05-06-ggpacman/index.html#how-pac-man-interacts-with-the-maze",
    "title": "A ggplot2 and gganimate Version of Pac-Man",
    "section": "\n6 How Pac-Man interacts with the maze?",
    "text": "6 How Pac-Man interacts with the maze?\n\n6.1 Bonus points\nFor ease, I am using some functions I defined to go quickly to the results of the first part of this readme. The idea here is to look at all the position in common between Pac-Man (pacman_moves) and the bonus points (maze_points). Each time Pac-Man was at the same place as a bonus point, I defined a status \"eaten\" for all values of step after. I ended up with a big table with position and the state of the bonus points.\n\npacman_moves &lt;- ggpacman::compute_pacman_coord(get(data(\"pacman\", package = \"ggpacman\")))\nright_join(get(data(\"maze_points\")), pacman_moves, by = c(\"x\", \"y\")) %&gt;%\n  distinct(step, x, y, type) %&gt;%\n  mutate(\n    step = map2(step, max(step), ~ seq(.x, .y, 1)),\n    colour = \"eaten\"\n  ) %&gt;%\n  unnest(\"step\")\n#&gt; # A tibble: 45,150 × 5\n#&gt;        x     y type    step colour\n#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt; \n#&gt;  1     1     1 normal    61 eaten \n#&gt;  2     1     1 normal    62 eaten \n#&gt;  3     1     1 normal    63 eaten \n#&gt;  4     1     1 normal    64 eaten \n#&gt;  5     1     1 normal    65 eaten \n#&gt;  6     1     1 normal    66 eaten \n#&gt;  7     1     1 normal    67 eaten \n#&gt;  8     1     1 normal    68 eaten \n#&gt;  9     1     1 normal    69 eaten \n#&gt; 10     1     1 normal    70 eaten \n#&gt; # … with 45,140 more rows\n\nAgain, for ease, I am using a function I defined to compute everything.\n\npacman_moves &lt;- ggpacman::compute_pacman_coord(get(data(\"pacman\", package = \"ggpacman\")))\nbonus_points_eaten &lt;- ggpacman::compute_points_eaten(get(data(\"maze_points\")), pacman_moves)\n\nIf you don’t recall, maze_layer already includes a geometry with the bonus points.\n\n\n\n\n\n\n\n\nI could have change this geometry (i.e., geom_point()), but I did not, and draw a new geometry on top of the previous ones. Do you remember the values of the scale for the size aesthetic?\n\nscale_size_manual(values = c(\"wall\" = 2.5, \"door\" = 1, \"big\" = 2.5, \"normal\" = 0.5, \"eaten\" = 3))\n\n\nmaze_layer_points &lt;- maze_layer +\n  geom_point(\n    data = bonus_points_eaten,\n    mapping = aes(x = x, y = y, colour = colour, size = colour, group = step),\n    inherit.aes = FALSE\n  )\n\n\n\n\n\n\n\n\n\nA new animation to see, how the new geometry is overlapping the previous one as step increases.\n\nanimated_points &lt;- maze_layer_points + transition_manual(step)\n\n\n\n\n\n\n\n\n\n\n6.2 Ghost \"weak\" and \"eaten\" states\nThe ghosts were more tricky (I know, they are ghosts …).\nI first retrieved all the positions where a \"big\" bonus point was eaten by Pac-Man.\n\nghosts_vulnerability &lt;- bonus_points_eaten %&gt;%\n  filter(type == \"big\") %&gt;%\n  group_by(x, y) %&gt;%\n  summarise(step_init = min(step)) %&gt;%\n  ungroup() %&gt;%\n  mutate(\n    step = map(step_init, ~ seq(.x, .x + 30, 1)),\n    vulnerability = TRUE,\n    x = NULL,\n    y = NULL\n  ) %&gt;%\n  unnest(\"step\")\n\n\n#&gt; # A tibble: 93 × 3\n#&gt;    step_init  step vulnerability\n#&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;        \n#&gt;  1        79    79 TRUE         \n#&gt;  2        79    80 TRUE         \n#&gt;  3        79    81 TRUE         \n#&gt;  4        79    82 TRUE         \n#&gt;  5        79    83 TRUE         \n#&gt;  6        79    84 TRUE         \n#&gt;  7        79    85 TRUE         \n#&gt;  8        79    86 TRUE         \n#&gt;  9        79    87 TRUE         \n#&gt; 10        79    88 TRUE         \n#&gt; # … with 83 more rows\n\nThis is part of a bigger function (I won’t dive too deep into it).\n\nggpacman::compute_ghost_status\n#&gt; function (ghost, pacman_moves, bonus_points_eaten) \n#&gt; {\n#&gt;     ghosts_vulnerability &lt;- bonus_points_eaten %&gt;% dplyr::filter(.data[[\"type\"]] == \n#&gt;         \"big\") %&gt;% dplyr::group_by(.data[[\"x\"]], .data[[\"y\"]]) %&gt;% \n#&gt;         dplyr::summarise(step_init = min(.data[[\"step\"]])) %&gt;% \n#&gt;         dplyr::ungroup() %&gt;% dplyr::mutate(step = purrr::map(.data[[\"step_init\"]], \n#&gt;         ~seq(.x, .x + 30, 1)), vulnerability = TRUE, x = NULL, \n#&gt;         y = NULL) %&gt;% tidyr::unnest(\"step\")\n#&gt;     ghost_out &lt;- dplyr::left_join(x = compute_ghost_coord(ghost), \n#&gt;         y = pacman_moves %&gt;% dplyr::mutate(ghost_eaten = TRUE) %&gt;% \n#&gt;             dplyr::select(c(X0 = \"x\", Y0 = \"y\", \"step\", \"ghost_eaten\")), \n#&gt;         by = c(\"X0\", \"Y0\", \"step\")) %&gt;% dplyr::left_join(y = ghosts_vulnerability, \n#&gt;         by = \"step\") %&gt;% dplyr::mutate(vulnerability = tidyr::replace_na(.data[[\"vulnerability\"]], \n#&gt;         FALSE), ghost_name = .data[[\"colour\"]], ghost_eaten = .data[[\"ghost_eaten\"]] & \n#&gt;         .data[[\"vulnerability\"]], colour = ifelse(.data[[\"vulnerability\"]], \n#&gt;         paste0(.data[[\"ghost_name\"]], \"_weak\"), .data[[\"colour\"]]))\n#&gt;     pos_eaten_start &lt;- which(ghost_out[[\"ghost_eaten\"]])\n#&gt;     ghosts_home &lt;- which(ghost_out[[\"X0\"]] == 10 & ghost_out[[\"Y0\"]] == \n#&gt;         14)\n#&gt;     for (ipos in pos_eaten_start) {\n#&gt;         pos_eaten_end &lt;- min(ghosts_home[ghosts_home &gt;= ipos])\n#&gt;         ghost_out[[\"colour\"]][ipos:pos_eaten_end] &lt;- paste0(unique(ghost_out[[\"ghost_name\"]]), \n#&gt;             \"_eaten\")\n#&gt;     }\n#&gt;     dplyr::left_join(x = ghost_out, y = ghost_out %&gt;% dplyr::filter(.data[[\"step\"]] == \n#&gt;         .data[[\"step_init\"]] & grepl(\"eaten\", .data[[\"colour\"]])) %&gt;% \n#&gt;         dplyr::mutate(already_eaten = TRUE) %&gt;% dplyr::select(c(\"step_init\", \n#&gt;         \"already_eaten\")), by = \"step_init\") %&gt;% dplyr::mutate(colour = dplyr::case_when(.data[[\"already_eaten\"]] & \n#&gt;         .data[[\"X0\"]] == 10 & .data[[\"Y0\"]] == 14 ~ paste0(.data[[\"ghost_name\"]], \n#&gt;         \"_eaten\"), grepl(\"weak\", .data[[\"colour\"]]) & .data[[\"already_eaten\"]] ~ \n#&gt;         .data[[\"ghost_name\"]], TRUE ~ .data[[\"colour\"]]))\n#&gt; }\n#&gt; &lt;bytecode: 0x10c690fb0&gt;\n#&gt; &lt;environment: namespace:ggpacman&gt;\n\nThe goal of this function, is to compute the different states of a ghost, according to the bonus points eaten and, of course, the current Pac-Man position at a determined step.\n\npacman_moves &lt;- ggpacman::compute_pacman_coord(get(data(\"pacman\", package = \"ggpacman\")))\nbonus_points_eaten &lt;- ggpacman::compute_points_eaten(get(data(\"maze_points\")), pacman_moves)\nghost_moves &lt;- ggpacman::compute_ghost_status(\n  ghost = get(data(\"blinky\", package = \"ggpacman\")),\n  pacman_moves = pacman_moves,\n  bonus_points_eaten = bonus_points_eaten\n)\nghost_moves %&gt;%\n  filter(state == 1) %&gt;%\n  distinct(step, direction, colour, vulnerability) %&gt;%\n  as.data.frame()\n#&gt;          colour direction step vulnerability\n#&gt; 1        Blinky    middle    1         FALSE\n#&gt; 2        Blinky    middle    5         FALSE\n#&gt; 3        Blinky    middle    9         FALSE\n#&gt; 4        Blinky    middle   13         FALSE\n#&gt; 5        Blinky    middle   17         FALSE\n#&gt; 6        Blinky    middle   21         FALSE\n#&gt; 7        Blinky    middle   25         FALSE\n#&gt; 8        Blinky    middle   29         FALSE\n#&gt; 9        Blinky    middle   33         FALSE\n#&gt; 10       Blinky      left   37         FALSE\n#&gt; 11       Blinky      left   41         FALSE\n#&gt; 12       Blinky      left   45         FALSE\n#&gt; 13       Blinky      down   49         FALSE\n#&gt; 14       Blinky      down   53         FALSE\n#&gt; 15       Blinky      down   57         FALSE\n#&gt; 16       Blinky      left   61         FALSE\n#&gt; 17       Blinky      left   65         FALSE\n#&gt; 18       Blinky      down   69         FALSE\n#&gt; 19       Blinky      down   73         FALSE\n#&gt; 20       Blinky      down   77         FALSE\n#&gt; 21  Blinky_weak      down   81          TRUE\n#&gt; 22  Blinky_weak      down   85          TRUE\n#&gt; 23 Blinky_eaten      left   89          TRUE\n#&gt; 24 Blinky_eaten     right   93          TRUE\n#&gt; 25 Blinky_eaten    middle   97          TRUE\n#&gt; 26 Blinky_eaten    middle  101          TRUE\n#&gt; 27 Blinky_eaten     right  105          TRUE\n#&gt; 28 Blinky_eaten        up  109          TRUE\n#&gt; 29 Blinky_eaten     right  113         FALSE\n#&gt; 30 Blinky_eaten        up  117         FALSE\n#&gt; 31 Blinky_eaten     right  121         FALSE\n#&gt; 32 Blinky_eaten        up  125         FALSE\n#&gt; 33 Blinky_eaten     right  129         FALSE\n#&gt; 34 Blinky_eaten        up  133         FALSE\n#&gt; 35 Blinky_eaten     right  137         FALSE\n#&gt; 36 Blinky_eaten        up  141          TRUE\n#&gt; 37 Blinky_eaten        up  145          TRUE\n#&gt; 38 Blinky_eaten    middle  149          TRUE\n#&gt; 39 Blinky_eaten    middle  153          TRUE\n#&gt; 40 Blinky_eaten    middle  157          TRUE\n#&gt; 41       Blinky        up  161          TRUE\n#&gt; 42       Blinky        up  165          TRUE\n#&gt; 43       Blinky     right  169          TRUE\n#&gt; 44       Blinky     right  173         FALSE\n#&gt; 45       Blinky     right  177         FALSE\n#&gt; 46       Blinky      down  181         FALSE\n#&gt; 47       Blinky      down  185         FALSE\n#&gt; 48       Blinky      down  189         FALSE\n#&gt; 49       Blinky      down  193         FALSE\n#&gt; 50       Blinky      down  197         FALSE\n#&gt; 51       Blinky      down  201         FALSE\n#&gt; 52       Blinky      down  205         FALSE\n#&gt; 53       Blinky      down  209         FALSE\n#&gt; 54       Blinky      left  213         FALSE\n#&gt; 55  Blinky_weak      left  217          TRUE\n#&gt; 56  Blinky_weak      down  221          TRUE\n#&gt; 57  Blinky_weak      down  225          TRUE\n#&gt; 58  Blinky_weak     right  229          TRUE\n#&gt; 59  Blinky_weak     right  233          TRUE\n#&gt; 60  Blinky_weak     right  237          TRUE\n#&gt; 61  Blinky_weak     right  241          TRUE\n#&gt; 62  Blinky_weak    middle  245          TRUE\n#&gt; 63       Blinky      down  249         FALSE\n#&gt; 64       Blinky      down  253         FALSE\n#&gt; 65       Blinky      down  257         FALSE\n#&gt; 66       Blinky     right  261         FALSE\n#&gt; 67       Blinky     right  265         FALSE\n#&gt; 68       Blinky        up  269         FALSE\n#&gt; 69       Blinky        up  273         FALSE\n#&gt; 70       Blinky        up  277         FALSE\n#&gt; 71       Blinky    middle  281         FALSE\n#&gt; 72       Blinky     right  285         FALSE\n#&gt; 73       Blinky     right  289         FALSE\n#&gt; 74       Blinky        up  293         FALSE\n#&gt; 75       Blinky        up  297         FALSE\n\nTo simplify a little, below a small example of a ghost moving in one direction with predetermined states.\n\nblinky_ghost &lt;- bind_rows(\n  tibble(x = 1:4, y = 0, colour = \"Blinky\"),\n  tibble(x = 5:8, y = 0, colour = \"Blinky_weak\"),\n  tibble(x = 9:12, y = 0, colour = \"Blinky_eaten\")\n)\nblinky_moves &lt;- ggpacman::compute_ghost_coord(blinky_ghost)\n\n\n#&gt; # A tibble: 48 × 12\n#&gt;    colour    X0    Y0 state_x state_y direc…¹ state  step noise_x  noise_y body \n#&gt;    &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt; &lt;lis&gt;\n#&gt;  1 Blinky     1     0      NA      NA middle      1     1  0.0381 -1.02e-2 &lt;df&gt; \n#&gt;  2 Blinky     1     0      NA      NA middle      2     2  0.0138  8.09e-2 &lt;df&gt; \n#&gt;  3 Blinky     1     0      NA      NA middle      3     3 -0.0236 -7.36e-2 &lt;df&gt; \n#&gt;  4 Blinky     1     0      NA      NA middle      4     4  0.0463 -1.09e-1 &lt;df&gt; \n#&gt;  5 Blinky     2     0       1       0 right       1     5  0.0443 -5.53e-2 &lt;df&gt; \n#&gt;  6 Blinky     2     0       1       0 right       2     6 -0.0241  6.92e-2 &lt;df&gt; \n#&gt;  7 Blinky     2     0       1       0 right       3     7 -0.0517  2.81e-2 &lt;df&gt; \n#&gt;  8 Blinky     2     0       1       0 right       4     8  0.0766  1.86e-2 &lt;df&gt; \n#&gt;  9 Blinky     3     0       1       0 right       1     9  0.0182  1.15e-2 &lt;df&gt; \n#&gt; 10 Blinky     3     0       1       0 right       2    10 -0.0943  6.72e-4 &lt;df&gt; \n#&gt; # … with 38 more rows, 1 more variable: eyes &lt;list&gt;, and abbreviated variable\n#&gt; #   name ¹​direction\n\n\nblinky_plot &lt;- base_layer +\n  coord_fixed(xlim = c(0, 13), ylim = c(-1, 1)) +\n  geom_polygon(\n    data = unnest(blinky_moves, \"body\"),\n    mapping = aes(x = x, y = y, fill = colour, colour = colour, group = step),\n    inherit.aes = FALSE\n  ) +\n  geom_circle(\n    data = unnest(blinky_moves, \"eyes\"),\n    mapping = aes(x0 = x0, y0 = y0, r = r, colour = part, fill = part, group = step),\n    inherit.aes = FALSE\n  )\n\n\n\n\n\n\n\n\n\nI am sure, you remember all the colours and their mapped values from the beginning, so you probably won’t need the following to understand of the ghost disappeared.\n\n\"Blinky\" = \"red\", \"Blinky_weak\" = \"blue\", \"Blinky_eaten\" = \"transparent\",\n\nNote: yes, \"transparent\" is a colour and a very handy one.\nA new animation to see our little Blinky in action?\n\nanimated_blinky &lt;- blinky_plot + transition_manual(step)"
  },
  {
    "objectID": "posts/2020-05-06-ggpacman/index.html#plot-time",
    "href": "posts/2020-05-06-ggpacman/index.html#plot-time",
    "title": "A ggplot2 and gganimate Version of Pac-Man",
    "section": "\n7 Plot time",
    "text": "7 Plot time\nIn the current version, nearly everything is either a dataset or a function and could be used like this.\n\n7.1 Load and compute the data\n\ndata(\"pacman\", package = \"ggpacman\")\ndata(\"maze_points\", package = \"ggpacman\")\ndata(\"maze_walls\", package = \"ggpacman\")\ndata(\"blinky\", package = \"ggpacman\")\ndata(\"pinky\", package = \"ggpacman\")\ndata(\"inky\", package = \"ggpacman\")\ndata(\"clyde\", package = \"ggpacman\")\nghosts &lt;- list(blinky, pinky, inky, clyde)\npacman_moves &lt;- ggpacman::compute_pacman_coord(pacman)\nbonus_points_eaten &lt;- ggpacman::compute_points_eaten(maze_points, pacman_moves)\nmap_colours &lt;- c(\n  \"READY!\" = \"goldenrod1\",\n  \"wall\" = \"dodgerblue3\", \"door\" = \"dodgerblue3\",\n  \"normal\" = \"goldenrod1\", \"big\" = \"goldenrod1\", \"eaten\" = \"black\",\n  \"Pac-Man\" = \"yellow\",\n  \"eye\" = \"white\", \"iris\" = \"black\",\n  \"Blinky\" = \"red\", \"Blinky_weak\" = \"blue\", \"Blinky_eaten\" = \"transparent\",\n  \"Pinky\" = \"pink\", \"Pinky_weak\" = \"blue\", \"Pinky_eaten\" = \"transparent\",\n  \"Inky\" = \"cyan\", \"Inky_weak\" = \"blue\", \"Inky_eaten\" = \"transparent\",\n  \"Clyde\" = \"orange\", \"Clyde_weak\" = \"blue\", \"Clyde_eaten\" = \"transparent\"\n)\n\n\n7.2 Build the base layer with the maze\n\nbase_grid &lt;- ggplot() +\n  theme_void() +\n  theme(\n    legend.position = \"none\",\n    plot.background = element_rect(fill = \"black\", colour = \"black\"),\n    panel.background = element_rect(fill = \"black\", colour = \"black\")\n  ) +\n  scale_size_manual(values = c(\"wall\" = 2.5, \"door\" = 1, \"big\" = 2.5, \"normal\" = 0.5, \"eaten\" = 3)) +\n  scale_fill_manual(breaks = names(map_colours), values = map_colours) +\n  scale_colour_manual(breaks = names(map_colours), values = map_colours) +\n  coord_fixed(xlim = c(0, 20), ylim = c(0, 26)) +\n  geom_segment(\n    data = maze_walls,\n    mapping = aes(x = x, y = y, xend = xend, yend = yend, size = type, colour = type),\n    lineend = \"round\",\n    inherit.aes = FALSE\n  ) +\n  geom_point(\n    data = maze_points,\n    mapping = aes(x = x, y = y, size = type, colour = type),\n    inherit.aes = FALSE\n  ) +\n  geom_text(\n    data = tibble(x = 10, y = 11, label = \"READY!\", step = 1:20),\n    mapping = aes(x = x, y = y, label = label, colour = label, group = step),\n    size = 6\n  )\n\n\nbase_grid\n\n\n\n\n\n\n\n\n7.3 Draw the \"eaten\" bonus points geometry\n\np_points &lt;- list(\n  geom_point(\n    data = bonus_points_eaten,\n    mapping = aes(x = x, y = y, colour = colour, size = colour, group = step),\n    inherit.aes = FALSE\n  )\n)\n\n\nbase_grid + p_points\n\n\n\n\n\n\n\n\n7.4 Draw the main character (I am talking about Pac-Man …)\n\np_pacman &lt;- list(\n  geom_arc_bar(\n    data = pacman_moves,\n    mapping = aes(\n      x0 = x, y0 = y,\n      r0 = 0, r = 0.5,\n      start = start, end = end,\n      colour = colour, fill = colour,\n      group = step\n    ),\n    inherit.aes = FALSE\n  )\n)\n\n\nbase_grid + p_pacman\n\n\n\n\n\n\n\n\n7.5 Draw the ghosts, using the trick that + works also on a list of geometries\n\np_ghosts &lt;- map(.x = ghosts, .f = function(data) {\n  ghost_moves &lt;- compute_ghost_status(\n    ghost = data,\n    pacman_moves = pacman_moves,\n    bonus_points_eaten = bonus_points_eaten\n  )\n  list(\n    geom_polygon(\n      data = unnest(ghost_moves, \"body\"),\n      mapping = aes(\n        x = x, y = y,\n        fill = colour, colour = colour,\n        group = step\n      ),\n      inherit.aes = FALSE\n    ),\n    geom_circle(\n      data = unnest(ghost_moves, \"eyes\"),\n      mapping = aes(\n        x0 = x0, y0 = y0,\n        r = r,\n        colour = part, fill = part,\n        group = step\n      ),\n      inherit.aes = FALSE\n    )\n  )\n})\n\n\nbase_grid + p_ghosts\n\n\n\n\n\n\n\n\n7.6 Draw everything\n\nbase_grid + p_points + p_pacman + p_ghosts\n\n\n\n\n\n\n\n\n7.7 Animate everything\n\nPacMan &lt;- base_grid + p_points + p_pacman + p_ghosts + transition_manual(step)"
  },
  {
    "objectID": "posts/2023-05-30-quarto-light-dark/index.html",
    "href": "posts/2023-05-30-quarto-light-dark/index.html",
    "title": "Quarto Q&A: How to have images for both light and dark theme?",
    "section": "",
    "text": "A new blog post of the “Quarto Q&A” series.\nThis time, I will show how to have images both for light and dark theme, when switching between them."
  },
  {
    "objectID": "posts/2023-05-30-quarto-light-dark/index.html#the-questionproblem",
    "href": "posts/2023-05-30-quarto-light-dark/index.html#the-questionproblem",
    "title": "Quarto Q&A: How to have images for both light and dark theme?",
    "section": "1 The Question/Problem",
    "text": "1 The Question/Problem\nWhen you build a website with Quarto, you can use the theme option to specify the theme you want to use for light and dark mode1.\ntheme:\n  light: united\n  dark: slate\nHowever, if you want to have images for both themes, you need to have two versions of the same image, one for light and one for dark mode. But how can you do that and how can you switch between them automatically?"
  },
  {
    "objectID": "posts/2023-05-30-quarto-light-dark/index.html#the-answersolution",
    "href": "posts/2023-05-30-quarto-light-dark/index.html#the-answersolution",
    "title": "Quarto Q&A: How to have images for both light and dark theme?",
    "section": "2 The Answer/Solution",
    "text": "2 The Answer/Solution\nLet’s use knitr2 as the engine to generate the images. For example, you can use svglite to generate SVG images and/or any custom knitr handler.\n\nSet the dev option to use svglite for light mode and darksvglite for dark mode and fig.ext to set the generated images extensions.\nknitr: \n  opts_chunk: \n    dev: [svglite, darksvglite]\n    fig.ext: [.light.svg, .dark.svg]\nCreate ggplot2 themes for light and dark images.\n\nLightDark\n\n\ntheme_light &lt;- function() {\n  theme_minimal(base_size = 11) %+%\n  theme(\n    panel.border = element_blank(),\n    panel.grid.major.y = element_blank(),\n    panel.grid.minor.y = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor.x = element_blank(),\n    text = element_text(colour = \"black\"),\n    axis.text = element_text(colour = \"black\"),\n    rect = element_rect(colour = \"white\", fill = \"black\"),\n    plot.background = element_rect(fill = \"white\", colour = NA),\n    axis.line = element_line(colour = \"black\"),\n    axis.ticks = element_line(colour = \"black\")\n  )\n}\n\n\ntheme_dark &lt;- function() {\n  theme_minimal(base_size = 11) %+%\n  theme(\n    panel.border = element_blank(),\n    panel.grid.major.y = element_blank(),\n    panel.grid.minor.y = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor.x = element_blank(),\n    text = element_text(colour = \"white\"),\n    axis.text = element_text(colour = \"white\"),\n    rect = element_rect(colour = \"#272b30\", fill = \"#272b30\"),\n    plot.background = element_rect(fill = \"#272b30\", colour = NA),\n    axis.line = element_line(colour = \"white\"),\n    axis.ticks = element_line(colour = \"white\")\n  )\n}\n\n\n\nCreate a new function to save the dark images.\ndarksvglite &lt;- function(file, width, height) {\n  on.exit(reset_theme_settings())\n  theme_set(theme_dark())\n  ggsave(\n    filename = file,\n    width = width,\n    height = height,\n    dev = \"svg\",\n    bg = \"transparent\"\n  )\n}\nThe ggplot2 code to build an image.\nlibrary(ggplot2)\nlibrary(palmerpenguins)\ntheme_set(theme_light())\nggplot(data = penguins) +\n  aes(\n    x = flipper_length_mm,\n    y = body_mass_g / 1e3,\n    colour = species,\n    shape = species\n  ) +\n  geom_point(alpha = 0.8, na.rm = TRUE) +\n  scale_colour_manual(values = c(\"darkorange\", \"purple\", \"cyan4\")) +\n  labs(\n    x = \"Flipper Length (mm)\",\n    y = \"Body Mass (kg)\",\n    color = \"Penguin Species\",\n    shape = \"Penguin Species\"\n  )\nThe JavaScript code to switch between the two images (i.e., .light.svg and .dark.svg)3.\n\n\nJavaScript code\n\n// Author: Mickaël Canouil\n// Version: &lt;1.0.0&gt;\n// Description: Change image src depending on body class (quarto-light or quarto-dark)\n// License: MIT\nfunction updateImageSrc() {\n  var bodyClass = window.document.body.classList;\n  var images = window.document.getElementsByTagName('img');\n  for (var i = 0; i &lt; images.length; i++) {\n    var image = images[i];\n    var src = image.src;\n    var newSrc = src;\n    if (bodyClass.contains('quarto-light') && src.includes('.dark')) {\n      newSrc = src.replace('.dark', '.light');\n    } else if (bodyClass.contains('quarto-dark') && src.includes('.light')) {\n      newSrc = src.replace('.light', '.dark');\n    }\n    if (newSrc !== src) {\n      image.src = newSrc;\n    }\n  }\n}\n\nvar observer = new MutationObserver(function(mutations) {\n  mutations.forEach(function(mutation) {\n    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {\n      updateImageSrc();\n    }\n  });\n});\n\nobserver.observe(window.document.body, {\n  attributes: true\n});\n\nupdateImageSrc();\n\nFinally, the whole Quarto document code.\n\n\nQuarto document code\n\n---\ntitle: \"Generated images for dark and light mode\"\nformat:\n  html:\n    theme:\n      light: united\n      dark: slate\nexecute:\n  echo: false\n  warning: false\nknitr: \n  opts_chunk: \n    dev: [svglite, darksvglite]\n    fig.ext: [.light.svg, .dark.svg]\ninclude-after-body:\n  text: |\n    &lt;script type=\"application/javascript\" src=\"light-dark.js\"&gt;&lt;/script&gt;\n---\n\n```{r}\n#| include: false\nlibrary(ggplot2)\ntheme_light &lt;- function() {\n  theme_minimal(base_size = 11) %+%\n  theme(\n    panel.border = element_blank(),\n    panel.grid.major.y = element_blank(),\n    panel.grid.minor.y = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor.x = element_blank(),\n    text = element_text(colour = \"black\"),\n    axis.text = element_text(colour = \"black\"),\n    rect = element_rect(colour = \"white\", fill = \"black\"),\n    plot.background = element_rect(fill = \"white\", colour = NA),\n    axis.line = element_line(colour = \"black\"),\n    axis.ticks = element_line(colour = \"black\")\n  )\n}\n\ntheme_dark &lt;- function() {\n  theme_minimal(base_size = 11) %+%\n  theme(\n    panel.border = element_blank(),\n    panel.grid.major.y = element_blank(),\n    panel.grid.minor.y = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor.x = element_blank(),\n    text = element_text(colour = \"white\"),\n    axis.text = element_text(colour = \"white\"),\n    rect = element_rect(colour = \"#272b30\", fill = \"#272b30\"),\n    plot.background = element_rect(fill = \"#272b30\", colour = NA),\n    axis.line = element_line(colour = \"white\"),\n    axis.ticks = element_line(colour = \"white\")\n  )\n}\n\ndarksvglite &lt;- function(file, width, height) {\n  on.exit(reset_theme_settings())\n  theme_set(theme_dark())\n  ggsave(\n    filename = file,\n    width = width,\n    height = height,\n    dev = \"svg\",\n    bg = \"transparent\"\n  )\n}\n```\n\n```{r}\n#| column: screen-inset\n#| fig-width: !expr 16/2\n#| fig-height: !expr 9/2\n#| out-width: 80%\nlibrary(ggplot2)\nlibrary(palmerpenguins)\ntheme_set(theme_light())\nggplot(data = penguins) +\n  aes(\n    x = flipper_length_mm,\n    y = body_mass_g / 1e3,\n    colour = species,\n    shape = species\n  ) +\n  geom_point(alpha = 0.8, na.rm = TRUE) +\n  scale_colour_manual(values = c(\"darkorange\", \"purple\", \"cyan4\")) +\n  labs(\n    x = \"Flipper Length (mm)\",\n    y = \"Body Mass (kg)\",\n    color = \"Penguin Species\",\n    shape = \"Penguin Species\"\n  )\n```\n\n\n\n\n\n\n\n\n\n\n\nLight mode ON\n\n\n\n\n\n\n\n\n\n\n\nDark mode ON"
  },
  {
    "objectID": "posts/2023-05-30-quarto-light-dark/index.html#footnotes",
    "href": "posts/2023-05-30-quarto-light-dark/index.html#footnotes",
    "title": "Quarto Q&A: How to have images for both light and dark theme?",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nSee https://quarto.org/docs/output-formats/html-themes.html#dark-mode.↩︎\nWhat matters is that you have two different images, one for light and one for dark mode, respectively with .light and .dark in their names.↩︎\nThe JavaScript code does not actually look for the images extensions, but for the images names.↩︎"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Mickaël CANOUIL",
    "section": "",
    "text": "Sponsor\nI am currently working as a consultant in Biostatistics in the field of genetics, i.e., proteomics, metabolomics, transcriptomics, etc. in Lille & Paris, France.\nAdditionally, I am also a freelance, available for hire to work on  and Quarto related projects.\nI have developed a few  packages (e.g., insane, NACHO), and although some are not very useful, they are most definitely entertaining (i.e., ggpacman).\nI also enjoy watching movies () and playing with  (github.com/mcanouil/imdb-ratings).\nHave a look at my complete  curriculum vitae."
  },
  {
    "objectID": "index.html#education",
    "href": "index.html#education",
    "title": "Mickaël CANOUIL",
    "section": "Education",
    "text": "Education\n\nPh.D. in Biostatistics, 2017\nUniversity of Lille, France\nM.Sc. in Biostatistics, Bioinformatics and Genomics (Specialised in Biostatistics), 2011\nUniversity Claude Bernard Lyon 1, France\nB.Sc. in Biology (Specialised in Biostatistics), 2009\nUniversity Claude Bernard Lyon 1, France"
  },
  {
    "objectID": "index.html#interests",
    "href": "index.html#interests",
    "title": "Mickaël CANOUIL",
    "section": "Interests",
    "text": "Interests\n\nWatching Movies\nQuarto\nMulti-omics\nLongitudinal Data\nData Analysis\nData Visualisation\nKnowledge Sharing\nLearning New Skills"
  },
  {
    "objectID": "talks/2019-01-21-lund-sweden/index.html",
    "href": "talks/2019-01-21-lund-sweden/index.html",
    "title": "A Statistical Seminar Applied on Type 2 Diabetes (Host: Pr. Paul Franks)",
    "section": "",
    "text": "Slides: https://m.canouil.dev/slides/20190121-joint-model-snp/.\nCode: https://github.com/mcanouil/joint_model.\n\n\n\n\n Back to top"
  },
  {
    "objectID": "talks/2021-04-14-min2rien-reproducibility/index.html",
    "href": "talks/2021-04-14-min2rien-reproducibility/index.html",
    "title": "Min 2 Rien (French)",
    "section": "",
    "text": "Blog post: https://www.min2rien.fr/le-reseau-metier-min2rien-organise-sa-semaine-retours-dexperience-2021/.\nSlides: https://m.canouil.dev/slides/20210414-journey-reproducibility/.\nCode: https://github.com/mcanouil/journey-reproducibility.\n\n\n\n\n Back to top"
  },
  {
    "objectID": "talks/2020-10-07-rlille-rstartup/index.html",
    "href": "talks/2020-10-07-rlille-rstartup/index.html",
    "title": "R Lille Meetup (French)",
    "section": "",
    "text": "Blog post: https://rlille.fr/posts/2020-09-10-debuter-avec-r/.\nMeetup: https://www.meetup.com/R-Lille/events/273159362/.\nSlides: https://m.canouil.dev/slides/20201007-r-startup/.\nCode: https://github.com/mcanouil/rstartup.\n\n\n\n\n Back to top"
  },
  {
    "objectID": "talks/2016-02-11-smpgd/index.html",
    "href": "talks/2016-02-11-smpgd/index.html",
    "title": "Statistical Methods for Post Genomic Data (SMPGD)",
    "section": "",
    "text": "Slides: https://github.com/mcanouil/slides/raw/main/20160211-longitudinal-genetic-modelling/20160211-longitudinal-genetic-modelling.pdf.\nCode: https://github.com/mcanouil/phd-thesis/tree/master/SMPGD2016.\n\n\n\n\n Back to top"
  },
  {
    "objectID": "projects.html",
    "href": "projects.html",
    "title": "Projects",
    "section": "",
    "text": "Quarto Wizard\n\n\nQuarto\n\nExtension\n\nVisual Studio Code\n\nPositron\n\n\n\nQuarto Wizard is a Visual Studio Code extension that assists you in managing Quarto projects.\n\n\n\n\nFriday, the 15th of November, 2024\n\n\n\n\n\n\n\n\n\n\n\n\nGitHub\n\n\nQuarto\n\nExtension\n\nHTML\n\nReveal.js\n\nLaTeX\n\nTypst\n\nDocx\n\n\n\nUse GitHub short references (commits, issues, discussions, and pull request) directly into your Quarto documents.\n\n\n\n\nSunday, the 14th of July, 2024\n\n\n\n\n\n\n\n\n\n\n\n\nHighlight-text\n\n\nQuarto\n\nExtension\n\nHTML\n\nReveal.js\n\nLaTeX\n\nTypst\n\nDocx\n\n\n\nQuarto extension that allows to highlight text in a document for various formats: HTML, LaTeX, Typst, and Docx.\n\n\n\n\nFriday, the 3rd of May, 2024\n\n\n\n\n\n\n\n\n\n\n\n\nInvoice (Typst)\n\n\nQuarto\n\nExtension\n\nHTML\n\n\n\nQuarto Typst template extension to make invoices.\n\n\n\n\nFriday, the 24th of November, 2023\n\n\n\n\n\n\n\n\n\n\n\n\nVersion Badge\n\n\nQuarto\n\nExtension\n\nHTML\n\n\n\nBadge is an extension for Quarto to provide a shortcode to display software version or anything as a badge.\n\n\n\n\nTuesday, the 20th of June, 2023\n\n\n\n\n\n\n\n\n\n\n\n\nPreview Colour\n\n\nQuarto\n\nExtension\n\nHTML\n\nReveal.js\n\nLaTeX\n\n\n\nA Quarto extension to add preview colour as a coloured symbol next to colour code.\n\n\n\n\nThursday, the 15th of June, 2023\n\n\n\n\n\n\n\n\n\n\n\n\nSpotlight\n\n\nQuarto\n\nExtension\n\nReveal.js\n\n\n\nA Quarto extension for Reveal.js allowing to highlight the current mouse position with a spotlight.\n\n\n\n\nFriday, the 10th of February, 2023\n\n\n\n\n\n\n\n\n\n\n\n\nLua Env\n\n\nQuarto\n\nExtension\n\n\n\nlua-env is an extension for Quarto to provide access to LUA objects as metadata.\n\n\n\n\nSunday, the 22nd of January, 2023\n\n\n\n\n\n\n\n\n\n\n\n\nMickaël CANOUIL’s Website\n\n\nQuarto\n\nHTML\n\n\n\nPersonal website of Mickaël CANOUIL made with Quarto.\n\n\n\n\nMonday, the 5th of December, 2022\n\n\n\n\n\n\n\n\n\n\n\n\nMasonry\n\n\nQuarto\n\nExtension\n\nHTML\n\n\n\nA Quarto extension providing support to Masonry.js.\n\n\n\n\nFriday, the 28th of October, 2022\n\n\n\n\n\n\n\n\n\n\n\n\nElevator\n\n\nQuarto\n\nExtension\n\nHTML\n\n\n\nA Quarto extension providing support to Elevator.js.\n\n\n\n\nMonday, the 12th of September, 2022\n\n\n\n\n\n\n\n\n\n\n\n\nAnimate\n\n\nQuarto\n\nExtension\n\nHTML\n\n\n\nA Quarto extension providing support to animate.css.\n\n\n\n\nSaturday, the 3rd of September, 2022\n\n\n\n\n\n\n\n\n\n\n\n\nLetter\n\n\nQuarto\n\nFormat\n\nLaTeX\n\n\n\nA Quarto template that assists you in creating a manuscript using the letter format.\n\n\n\n\nSunday, the 21st of August, 2022\n\n\n\n\n\n\n\n\n\n\n\n\nIconify\n\n\nQuarto\n\nExtension\n\nHTML\n\n\n\nA Quarto extension providing support to free and open source icons provided by Iconify.\n\n\n\n\nSaturday, the 13th of August, 2022\n\n\n\n\n\n\n\n\n\n\n\n\nAwesome Quarto\n\n\nQuarto\n\n\n\nA curated list of Quarto talks, tools, examples & articles!\n\n\n\n\nMonday, the 1st of August, 2022\n\n\n\n\n\n\n\n\n\n\n\n\nStorybook\n\n\nQuarto\n\nFormat\n\nReveal.js\n\n\n\nA old tale book style Quarto template extension for Reveal.js presentation.\n\n\n\n\nWednesday, the 20th of July, 2022\n\n\n\n\n\n\n\n\n\n\n\n\nCoeos\n\n\nQuarto\n\nFormat\n\nReveal.js\n\n\n\nA dark grey Quarto template extension for Reveal.js presentation.\n\n\n\n\nWednesday, the 20th of July, 2022\n\n\n\n\n\n\n\n\n\n\n\n\nR Lille Website\n\n\nQuarto\n\nHTML\n\n\n\nR Lille R User Group website made with Quarto.\n\n\n\n\nSaturday, the 14th of May, 2022\n\n\n\n\n\n\n\n\n\n\n\n\nShiny: First Steps (French)\n\n\nWorkshop\n\nR\n\nShiny\n\nFrench\n\n\n\nA one-day workshop on the R package shiny.\n\n\n\n\nFriday, the 8th of October, 2021\n\n\n\n\n\n\n\n\n\n\n\n\nR Advanced Introduction (French)\n\n\nWorkshop\n\nCourse\n\nR\n\nFrench\n\n\n\nA 6-hours introduction workshop/course on objects and types in R.\n\n\n\n\nThursday, the 7th of October, 2021\n\n\n\n\n\n\n\n\n\n\n\n\nggpacman\n\n\nR package\n\n\n\nA ggplot2 and gganimate version of Pac-Man.\n\n\n\n\nSunday, the 22nd of March, 2020\n\n\n\n\n\n\n\n\n\n\n\n\numr1283: UMR 1283 - Project Template\n\n\nR package\n\n\n\nAn R package to create the project structure within the Inserm U1283 / CNRS UMR 8199 unit.\n\n\n\n\nFriday, the 14th of February, 2020\n\n\n\n\n\n\n\n\n\n\n\n\nR Lille\n\n\nR User Group\n\n\n\nR Lille is an R User Group (RUG) located in Lille, France. R Lille is part of the Meetup RUG network sponsored by the R Consortium.\n\n\n\n\nSaturday, the 1st of February, 2020\n\n\n\n\n\n\n\n\n\n\n\n\nR Packages\n\n\nWorkshop\n\nR\n\nR package\n\nFrench\n\n\n\nA 30 minutes introduction to building R packages.\n\n\n\n\nFriday, the 31st of January, 2020\n\n\n\n\n\n\n\n\n\n\n\n\ninsane: INsulin Secretion ANalysEr\n\n\nR package\n\n\n\nA user-friendly interface, using Shiny, to analyse glucose-stimulated insulin secretion (GSIS) assays in pancreatic beta cells or islets.\n\n\n\n\nWednesday, the 13th of February, 2019\n\n\n\n\n\n\n\n\n\n\n\n\nMiSTr: Mixed effects Score Test\n\n\nR package\n\n\n\nTest for association between a set of SNPS/genes and continuous or binary outcomes by including variant characteristic information and using (weighted) score statistics. MiSTr is an improvement of the MiST outputs.\n\n\n\n\nWednesday, the 13th of June, 2018\n\n\n\n\n\n\n\n\n\n\n\n\nNACHO: NAnostring quality Control dasHbOard\n\n\nR package\n\n\n\nA shiny-based dashboard to load, visualise and normalise the exported NanoString nCounter data and facilitates the user in performing a quality control.\n\n\n\n\nWednesday, the 13th of June, 2018\n\n\n\n\n\n\n\n\n\n\n\n\nR and Databases (French)\n\n\nWorkshop\n\nR\n\nDatabase\n\nFrench\n\n\n\nA two-days workshop on R and databases (+ web scraping).\n\n\n\n\nThursday, the 3rd of May, 2018\n\n\n\n\n\n\nNo matching items\n\n  \n\n Back to top"
  },
  {
    "objectID": "publications.html",
    "href": "publications.html",
    "title": "Publications (7 + 42)",
    "section": "",
    "text": "Order By\n      Default\n      \n        Issued - Oldest\n      \n      \n        Issued - Newest\n      \n      \n        Title\n      \n      \n        Journal\n      \n      \n        Rank\n      \n      \n        First\n      \n    \n  \n    \n      \n      \n    \n\n\n\n\n\n\nIssued\n\n\n\nTitle\n\n\n\nJournal\n\n\n\nFirst\n\n\n\nRank\n\n\n\n\n\n\n\n\nNovember,2024\n\n\nA framework for conducting GWAS using repeated measures data with an application to childhood BMI\n\n\nNature Communications\n\n\n   \n\n\n19/20\n\n\n\n\n\n\nAugust,2024\n\n\nFunctional genetics reveals the contribution of delta opioid receptor to type 2 diabetes and beta-cell function\n\n\nNature Communications\n\n\n   \n\n\n27/30\n\n\n\n\n\n\nAugust,2024\n\n\nPNLIPRP1 hypermethylation in exocrine pancreas links type 2 diabetes and cholesterol metabolism\n\n\nDiabetes\n\n\n   \n\n\n18/22\n\n\n\n\n\n\nMarch,2024\n\n\nGenetic drivers of heterogeneity in type 2 diabetes pathophysiology\n\n\nNature\n\n\n   \n\n\n91/365\n\n\n\n\n\n\nSeptember,2023\n\n\nIdentification of myokines susceptible to improve glucose homeostasis after bariatric surgery\n\n\nEuropean Journal of Endocrinology\n\n\n   \n\n\n2/12\n\n\n\n\n\n\nMay,2023\n\n\nIdentification of biomarkers for glycaemic deterioration in type 2 diabetes\n\n\nNature Communications\n\n\n   \n\n\n21/64\n\n\n\n\n\n\nMarch,2023\n\n\nContribution of heterozygous PCSK1 variants to obesity and implications for precision medicine: A case-control study\n\n\nThe Lancet Diabetes & Endocrinology\n\n\n   \n\n\n16/19\n\n\n\n\n\n\nJuly,2022\n\n\nEpigenetic changes associated with hyperglycaemia exposure in the longitudinal D.E.S.I.R. cohort\n\n\nDiabetes & Metabolism\n\n\n   \n\n\n5/7\n\n\n\n\n\n\nJune,2022\n\n\nEpigenetic and Transcriptomic Programming of HSC Quiescence Signaling in Large for Gestational Age Neonates\n\n\nInternational Journal of Molecular Sciences\n\n\n   \n\n\n4/12\n\n\n\n\n\n\nMay,2022\n\n\nMulti-ancestry genetic study of type 2 diabetes highlights the power of diverse populations for discovery and translation\n\n\nNature Genetics\n\n\n   \n\n\n90/347\n\n\n\n\n\n\nApril,2022\n\n\nRare Variant Analysis of Obesity-Associated Genes in Young Adults With Severe Obesity From a Consanguineous Population of Pakistan\n\n\nDiabetes\n\n\n   \n\n\n12/16\n\n\n\n\n\n\nMarch,2022\n\n\nMaternal Glycemic Dysregulation During Pregnancy and Neonatal Blood DNA Methylation: Meta-analyses of Epigenome-Wide Association Studies\n\n\nDiabetes Care\n\n\n   \n\n\n6/51\n\n\n\n\n\n\nFebruary,2022\n\n\nMulti-ancestry genome-wide association study of gestational diabetes mellitus highlights genetic links with type 2 diabetes\n\n\nHuman Molecular Genetics\n\n\n   \n\n\n8/73\n\n\n\n\n\n\nJanuary,2022\n\n\nFour groups of type 2 diabetes contribute to the etiological and clinical heterogeneity in newly diagnosed individuals: An IMI DIRECT study\n\n\nCell Reports Medicine\n\n\n   \n\n\n38/60\n\n\n\n\n\n\nNovember,2021\n\n\nElevated circulating follistatin associates with an increased risk of type 2 diabetes\n\n\nNature Communications\n\n\n   \n\n\n17/42\n\n\n\n\n\n\nOctober,2021\n\n\nIdentification of Key Regions Mediating Human Melatonin Type 1 Receptor Functional Selectivity Revealed by Natural Variants\n\n\nACS Pharmacology & Translational Science\n\n\n   \n\n\n7/17\n\n\n\n\n\n\nSeptember,2021\n\n\nEpigenome-Wide Association Study Reveals Methylation Loci Associated With Offspring Gestational Diabetes Mellitus Exposure and Maternal Methylome\n\n\nDiabetes Care\n\n\nAs first or co-first\n\n\n1/15\n\n\n\n\n\n\nJune,2021\n\n\nGene-educational attainment interactions in a multi-ancestry genome-wide meta-analysis identify novel blood pressure loci\n\n\nMolecular Psychiatry\n\n\n   \n\n\n73/215\n\n\n\n\n\n\nApril,2021\n\n\nSHP2 drives inflammation-triggered insulin resistance by reshaping tissue macrophage populations\n\n\nScience Translational Medicine\n\n\n   \n\n\n17/33\n\n\n\n\n\n\nFebruary,2021\n\n\nChromatin 3D interaction analysis of the STARD10 locus unveils FCHSD2 as a regulator of insulin secretion\n\n\nCell Reports\n\n\n   \n\n\n7/18\n\n\n\n\n\n\nJanuary,2021\n\n\nMonogenic diabetes characteristics in a transnational multicenter study from Mediterranean countries\n\n\nDiabetes Research and Clinical Practice\n\n\n   \n\n\n11/24\n\n\n\n\n\n\nDecember,2020\n\n\nPersistent or Transient Human β Cell Dysfunction Induced by Metabolic Stress: Specific Signatures and Shared Gene Expression with Type 2 Diabetes\n\n\nCell Reports\n\n\n   \n\n\n32/36\n\n\n\n\n\n\nDecember,2020\n\n\nHistone deacetylase 9 promoter hypomethylation associated with adipocyte dysfunction is a statin-related metabolic effect\n\n\nClinical Epigenetics\n\n\n   \n\n\n3/10\n\n\n\n\n\n\nOctober,2020\n\n\nPathogenic variants in actionable MODY genes are associated with type 2 diabetes\n\n\nNature Metabolism\n\n\n   \n\n\n24/27\n\n\n\n\n\n\nMay,2020\n\n\nGeneral regression model: A “model‐free” association test for quantitative traits allowing to test for the underlying genetic model\n\n\nAnnals of Human Genetics\n\n\n   \n\n\n5/11\n\n\n\n\n\n\nFebruary,2020\n\n\nNACHO: An R package for quality control of NanoString nCounter data\n\n\nBioinformatics\n\n\nAs first or co-first\n\n\n1/6\n\n\n\n\n\n\nFebruary,2020\n\n\nThe expression of genes in top obesity-associated loci is enriched in insula and substantia nigra brain regions involved in addiction and reward\n\n\nInternational Journal of Obesity\n\n\n   \n\n\n4/17\n\n\n\n\n\n\nNovember,2019\n\n\nLoss-of-function mutations in MRAP2 are pathogenic in hyperphagic obesity with hyperglycemia and hypertension\n\n\nNature Medicine\n\n\n   \n\n\n29/31\n\n\n\n\n\n\nOctober,2019\n\n\nA trans-ancestral meta-analysis of genome-wide association studies reveals loci associated with childhood obesity\n\n\nHuman Molecular Genetics\n\n\n   \n\n\n41/97\n\n\n\n\n\n\nAugust,2019\n\n\nA multi-ancestry genome-wide study incorporating gene–smoking interactions identifies multiple new loci for pulse pressure and mean arterial pressure\n\n\nHuman Molecular Genetics\n\n\n   \n\n\n92/273\n\n\n\n\n\n\nJuly,2019\n\n\nGenome-wide Association Study of Change in Fasting Glucose over time in 13,807 non-diabetic European Ancestry Individuals\n\n\nScientific Reports\n\n\n   \n\n\n7/48\n\n\n\n\n\n\nJune,2019\n\n\nLaser capture microdissection of human pancreatic islets reveals novel eQTLs associated with type 2 diabetes\n\n\nMolecular Metabolism\n\n\nAs first or co-first\n\n\n2/20\n\n\n\n\n\n\nJune,2019\n\n\nMultiancestry Genome-Wide Association Study of Lipid Levels Incorporating Gene-Alcohol Interactions\n\n\nAmerican Journal of Epidemiology\n\n\n   \n\n\n79/256\n\n\n\n\n\n\nJune,2019\n\n\nA catalog of genetic loci associated with kidney function from analyses of a million individuals\n\n\nNature Genetics\n\n\n   \n\n\n50/291\n\n\n\n\n\n\nApril,2019\n\n\nMulti-ancestry genome-wide gene–smoking interaction study of 387,272 individuals identifies new loci associated with serum lipids\n\n\nNature Genetics\n\n\n   \n\n\n96/292\n\n\n\n\n\n\nJanuary,2019\n\n\nMulti-ancestry study of blood lipid levels identifies four loci interacting with physical activity\n\n\nNature Communications\n\n\n   \n\n\n72/226\n\n\n\n\n\n\nNovember,2018\n\n\nFine-mapping type 2 diabetes loci to single-variant resolution using high-density imputation and islet-specific epigenome maps\n\n\nNature Genetics\n\n\n   \n\n\n35/115\n\n\n\n\n\n\nAugust,2018\n\n\nType 2 diabetes–associated variants of the MT \\(_{\\textrm{2}}\\) melatonin receptor affect distinct modes of signaling\n\n\nScience Signaling\n\n\n   \n\n\n9/17\n\n\n\n\n\n\nJuly,2018\n\n\nIncreased Hepatic PDGF-AA Signaling Mediates Liver Insulin Resistance in Obesity-Associated Type 2 Diabetes\n\n\nDiabetes\n\n\nAs first or co-first\n\n\n4/38\n\n\n\n\n\n\nJune,2018\n\n\nNovel genetic associations for blood pressure identified via gene-alcohol interaction in up to 570K individuals across multiple ancestries\n\n\nPLOS ONE\n\n\n   \n\n\n86/267\n\n\n\n\n\n\nJune,2018\n\n\nJointly Modelling Single Nucleotide Polymorphisms With Longitudinal and Time-to-Event Trait: An Application to Type 2 Diabetes and Fasting Plasma Glucose\n\n\nFrontiers in Genetics\n\n\nAs first or co-first\n\n\n1/5\n\n\n\n\n\n\nApril,2018\n\n\nRefining the accuracy of validated target identification through coding variant fine-mapping in type 2 diabetes\n\n\nNature Genetics\n\n\n   \n\n\n65/237\n\n\n\n\n\n\nMarch,2018\n\n\nA Large-Scale Multi-ancestry Genome-wide Study Accounting for Smoking Behavior Identifies Multiple Significant Loci for Blood Pressure\n\n\nThe American Journal of Human Genetics\n\n\n   \n\n\n91/288\n\n\n\n\n\n\nDecember,2017\n\n\nRelationship between salivary/pancreatic amylase and body mass index: A systems biology approach\n\n\nBMC Medicine\n\n\n   \n\n\n4/20\n\n\n\n\n\n\nJune,2017\n\n\nLow-dose exposure to bisphenols A, F and S of human primary adipocyte impacts coding and non-coding RNA profiles\n\n\nPLOS ONE\n\n\nAs first or co-first\n\n\n2/9\n\n\n\n\n\n\nJune,2017\n\n\nExpression and functional assessment of candidate type 2 diabetes susceptibility genes identify four new genes contributing to human insulin secretion\n\n\nMolecular Metabolism\n\n\nAs first or co-first\n\n\n3/22\n\n\n\n\n\n\nFebruary,2017\n\n\nDecreased STARD10 Expression Is Associated with Defective Insulin Secretion in Humans and Mice\n\n\nThe American Journal of Human Genetics\n\n\n   \n\n\n9/25\n\n\n\n\n\n\nJanuary,2017\n\n\nHepatic DPP4 DNA Methylation Associates With Fatty Liver\n\n\nDiabetes\n\n\n   \n\n\n7/17\n\n\n\n\n\n\nApril,2016\n\n\nVariable Clustering in High-Dimensional Linear Regression: The R Package clere\n\n\nThe R Journal\n\n\n   \n\n\n4/4\n\n\n\n\n\n\nNo matching items\n\n  \n\n Back to top"
  },
  {
    "objectID": "talks/2017-09-29-phd/index.html",
    "href": "talks/2017-09-29-phd/index.html",
    "title": "Ph.D. Defense (French)",
    "section": "",
    "text": "Slides: https://github.com/mcanouil/slides/raw/main/20170929-phd-defense/20170929-phd-defense.pdf.\nCode: https://github.com/mcanouil/phd-thesis/tree/master/BeamerThesis.\n\n\n\n\n Back to top"
  },
  {
    "objectID": "talks/2019-09-06-lausanne-switzerland/index.html",
    "href": "talks/2019-09-06-lausanne-switzerland/index.html",
    "title": "Research Seminar",
    "section": "",
    "text": "Slides: https://m.canouil.dev/slides/20190906-nacho/.\nCode: https://github.com/mcanouil/NACHO_slides.\n\n\n\n\n Back to top"
  },
  {
    "objectID": "talks/2021-04-15-rlille-reproducibility/index.html",
    "href": "talks/2021-04-15-rlille-reproducibility/index.html",
    "title": "R Lille Meetup",
    "section": "",
    "text": "Blog post: https://rlille.fr/posts/2021-03-26-journey-transparency/.\nMeetup: https://www.meetup.com/R-Lille/events/277031496/.\nSlides: https://m.canouil.dev/slides/20210415-journey-reproducibility/.\nCode: https://github.com/mcanouil/journey-reproducibility.\n\n\n\n\n Back to top"
  },
  {
    "objectID": "talks.html",
    "href": "talks.html",
    "title": "Talks",
    "section": "",
    "text": "R Lille Meetup\n\n\nMy Journey To Transparency And Reproducibility. A journey towards a more transparent and reproducible work environment using Docker and renv.\n\n\n\n\n\nThursday, the 15th of April, 2021\n\n\nMickaël CANOUIL\n\n\n\n\n\n\n\n\n\n\n\n\nMin 2 Rien (French)\n\n\nMy Journey To Transparency And Reproducibility.A journey towards a more transparent and reproducible work environment using Docker and renv.\n\n\n\n\n\nWednesday, the 14th of April, 2021\n\n\nMickaël CANOUIL\n\n\n\n\n\n\n\n\n\n\n\n\nR Lille Meetup (French)\n\n\n“Débuter” avec R en Commençant par le Début … Tips and advices to start well with R (and RStudio).\n\n\n\n\n\nThursday, the 7th of January, 2021\n\n\nMickaël CANOUIL\n\n\n\n\n\n\n\n\n\n\n\n\nResearch Seminar\n\n\nNACHO: an R package for quality control of NanoString nCounter data. DOI: 10.1093/bioinformatics/btz647.\n\n\n\n\n\nFriday, the 6th of September, 2019\n\n\nMickaël CANOUIL\n\n\n\n\n\n\n\n\n\n\n\n\nA Statistical Seminar Applied on Type 2 Diabetes (Host: Pr. Paul Franks)\n\n\nJointly Modelling Single Nucleotide Polymorphisms With Longitudinal and Time-to-Event Trait: An Application to Type 2 Diabetes and Fasting Plasma Glucose. DOI: 10.3389/fgene.2018.00210.\n\n\n\n\n\nMonday, the 21st of January, 2019\n\n\nMickaël CANOUIL\n\n\n\n\n\n\n\n\n\n\n\n\nPh.D. Defense (French)\n\n\nDevelopment and Application of Statistical Methods for Multi-omics Studies in Type 2 Diabetes: Beyond the Genome-wide Association Studies Era.\n\n\n\n\n\nFriday, the 29th of September, 2017\n\n\nMickaël CANOUIL\n\n\n\n\n\n\n\n\n\n\n\n\nStatistical Methods for Post Genomic Data (SMPGD)\n\n\nRevisiting Associations of SNPs Associated with Blood Fasting Glucose in Normoglycemic Individuals.\n\n\n\n\n\nThursday, the 11th of February, 2016\n\n\nMickaël CANOUIL\n\n\n\n\n\nNo matching items\n Back to top"
  },
  {
    "objectID": "blog.html",
    "href": "blog.html",
    "title": "Blog",
    "section": "",
    "text": "A ggplot2 and gganimate Version of Pac-Man\n\n\n\nR\n\nVisualisation\n\nggplot2\n\ngganimate\n\nFun\n\n\n\nThe story of ggpacman. Or how to build a useless but fun R package to make a GIF of the game Pac-Man.\n\n\n\n\n\nMonday, the 5th of May, 2025\n\n\nMickaël CANOUIL, Ph.D.\n\n\n\n\n\n\n\n\n\n\n\n\nQuarto: Publishing to GitHub Pages\n\n\n\nQuarto\n\nGitHub Pages\n\nPublishing\n\nDeployment\n\nGitHub Actions\n\n\n\nIn this guide, we’ll explore various methods to publish your Quarto projects to GitHub Pages. We’ll cover both manual and automated approaches to help you choose the best fit for your workflow.\n\n\n\n\n\nMonday, the 30th of December, 2024\n\n\nMickaël CANOUIL, Ph.D.\n\n\n\n\n\n\n\n\n\n\n\n\nQuarto Q&A: How to have images for both light and dark theme?\n\n\n\nQuarto\n\nQ&A\n\nJavaScript\n\ntheme\n\ndark mode\n\nlight mode\n\n\n\nIn this blog post of the “Quarto Q&A” series you will learn how to generate images for light and dark theme using knitr and switch between them when changing theme.\n\n\n\n\n\nTuesday, the 30th of May, 2023\n\n\nMickaël CANOUIL, Ph.D.\n\n\n\n\n\n\n\n\n\n\n\n\nQuarto Q&A: How to publish your Quarto content as a Docker container?\n\n\n\nQuarto\n\nQ&A\n\nDocker\n\n\n\nIn this blog post of the “Quarto Q&A” series you will learn how to publish your Quarto project as a Docker container.\n\n\n\n\n\nSunday, the 7th of May, 2023\n\n\nMickaël CANOUIL, Ph.D.\n\n\n\n\n\n\n\n\n\n\n\n\nQuarto Q&A: How to use non-default LaTeX packages/macros in MathJax?\n\n\n\nQuarto\n\nQ&A\n\nMathJax\n\nLaTeX\n\n\n\nA second blog post of the “Quarto Q&A” series on how to activate additional MathJax packages in a Quarto document.\n\n\n\n\n\nSunday, the 12th of March, 2023\n\n\nMickaël CANOUIL, Ph.D.\n\n\n\n\n\n\n\n\n\n\n\n\nQuarto Q&A: How to have labels and captions for an unknown number of tables?\n\n\n\nQuarto\n\nQ&A\n\nR\n\nknitr\n\n\n\nA small example of how to automatically have labels and captions for an unknown number of tables in Quarto, using knitr and R.\n\n\n\n\n\nSunday, the 5th of March, 2023\n\n\nMickaël CANOUIL, Ph.D.\n\n\n\n\n\n\n\n\n\n\n\n\nAdd a Floating Table of Contents in blogdown\n\n\n\nR\n\nblogdown\n\nrmarkdown\n\nHUGO\n\nWebsite\n\n\n\nHow to have a table of contents (TOC) on either the left or the right side of a post? I have an answer!\n\n\n\n\n\nThursday, the 6th of May, 2021\n\n\nMickaël CANOUIL, Ph.D.\n\n\n\n\n\n\n\n\n\n\n\n\nA ggplot2 and gganimate Version of Pac-Man\n\n\n\nR\n\nVisualisation\n\nggplot2\n\ngganimate\n\nFun\n\n\n\nThe story of ggpacman. Or how to build a useless but fun R package to make a GIF of the game Pac-Man.\n\n\n\n\n\nWednesday, the 6th of May, 2020\n\n\nMickaël CANOUIL, Ph.D.\n\n\n\n\n\n\n\n\n\n\n\n\nAIDD News\n\n\n\nR\n\nVisualisation\n\nggplot2\n\ngganimate\n\nFun\n\n\n\nAIDD News.\n\n\n\n\n\nWednesday, the 6th of May, 2020\n\n\nMickaël CANOUIL, Ph.D.\n\n\n\n\n\nNo matching items\n Back to top"
  },
  {
    "objectID": "posts/2023-03-05-quarto-auto-table-crossref/index.html",
    "href": "posts/2023-03-05-quarto-auto-table-crossref/index.html",
    "title": "Quarto Q&A: How to have labels and captions for an unknown number of tables?",
    "section": "",
    "text": "I decided to start small blog posts with answers/solutions to questions I have seen and answered on Twitter, Mastodon, and Quarto GitHub Issues & Discussions."
  },
  {
    "objectID": "posts/2023-03-05-quarto-auto-table-crossref/index.html#the-questionproblem",
    "href": "posts/2023-03-05-quarto-auto-table-crossref/index.html#the-questionproblem",
    "title": "Quarto Q&A: How to have labels and captions for an unknown number of tables?",
    "section": "\n1 The Question/Problem",
    "text": "1 The Question/Problem\n\nSuppose, in a #QuartoPub document, using #rStats I have a list of length G, each item in this list is a flextable - I need to use flextable as opposed to kable, to allow for output to docx. G is unknown apriori, but will be at least 1.\nIs there any way to create a sequence of tables with associated labels and captions that could be worked out dynamically/parsed? Manually, this can be done really easily (creating new labels etc) and knowing when to stop, but is there a way of automating this?\n\nSource: https://mastodon.ie/@DToher/109915736491084825"
  },
  {
    "objectID": "posts/2023-03-05-quarto-auto-table-crossref/index.html#the-answersolution",
    "href": "posts/2023-03-05-quarto-auto-table-crossref/index.html#the-answersolution",
    "title": "Quarto Q&A: How to have labels and captions for an unknown number of tables?",
    "section": "\n2 The Answer/Solution",
    "text": "2 The Answer/Solution\nThe trick is, within a code cell with output: asis, to use knitr::knit_child() to create code cells with label, caption (tbl-cap), or whatever option you might want or need.\n\n\nQuarto Input\nQuarto Output\n\n\n\n---\nformat: html\n---\n\n```{r}\n#| include: false\nfor (ipkg in c(\"palmerpenguins\", \"gt\", \"dplyr\")) {\n  if (!require(ipkg, character.only = TRUE)) {\n    install.packages(ipkg)\n    library(ipkg, character.only = TRUE)\n  }\n}\n```\n\nBelow are tables of the first six rows of the Palmer penguins dataset by species:\n\n```{r}\n#| echo: false\n#| output: asis\ncat(\n  sprintf(\n    \"- `%s` (@tbl-%s)\",\n    levels(penguins[[\"species\"]]),\n    levels(penguins[[\"species\"]])\n  ),\n  sep = \"\\n\"\n)\n\nfor (ispecies in levels(penguins[[\"species\"]])) {\n  tab &lt;- penguins |&gt;\n    filter(species %in% ispecies) |&gt;\n    select(-species) |&gt;\n    head() |&gt;\n    gt() |&gt;\n    tab_header(title = ispecies)\n  cat(sep = \"\\n\", knitr::knit_child(quiet = TRUE, text = c(\n    \"```{r}\",\n    \"#| echo: false\",\n    sprintf(\"#| tbl-cap: %s\", ispecies),\n    sprintf(\"#| label: tbl-%s\", ispecies),\n    \"tab\",\n    \"```\"\n  )))\n}\n```"
  },
  {
    "objectID": "posts/2023-03-05-quarto-auto-table-crossref/index.html#references",
    "href": "posts/2023-03-05-quarto-auto-table-crossref/index.html#references",
    "title": "Quarto Q&A: How to have labels and captions for an unknown number of tables?",
    "section": "\n3 References",
    "text": "3 References\nReferences:\n\nhttps://bookdown.org/yihui/rmarkdown-cookbook/child-document.html\nhttps://bookdown.org/yihui/rmarkdown-cookbook/knit-expand.html\nhttps://bookdown.org/yihui/rmarkdown-cookbook/results-asis.html"
  },
  {
    "objectID": "posts/2023-03-05-quarto-auto-table-crossref/index.html#examples",
    "href": "posts/2023-03-05-quarto-auto-table-crossref/index.html#examples",
    "title": "Quarto Q&A: How to have labels and captions for an unknown number of tables?",
    "section": "\n4 Examples",
    "text": "4 Examples\n\nhttps://github.com/quarto-dev/quarto-examples"
  },
  {
    "objectID": "posts/2023-03-12-quarto-mathjax-packages/index.html",
    "href": "posts/2023-03-12-quarto-mathjax-packages/index.html",
    "title": "Quarto Q&A: How to use non-default LaTeX packages/macros in MathJax?",
    "section": "",
    "text": "A second blog post of the “Quarto Q&A” series.\nThis time, I will show how to activate additional MathJax packages in a Quarto document."
  },
  {
    "objectID": "posts/2023-03-12-quarto-mathjax-packages/index.html#the-questionproblem",
    "href": "posts/2023-03-12-quarto-mathjax-packages/index.html#the-questionproblem",
    "title": "Quarto Q&A: How to use non-default LaTeX packages/macros in MathJax?",
    "section": "\n1 The Question/Problem",
    "text": "1 The Question/Problem\nSometimes you want to use additional MathJax packages in a Quarto document, such as being able to use \\qty from physics or upper/lower case Greek letters from upgreek."
  },
  {
    "objectID": "posts/2023-03-12-quarto-mathjax-packages/index.html#the-answersolution",
    "href": "posts/2023-03-12-quarto-mathjax-packages/index.html#the-answersolution",
    "title": "Quarto Q&A: How to use non-default LaTeX packages/macros in MathJax?",
    "section": "\n2 The Answer/Solution",
    "text": "2 The Answer/Solution\nThe solution is to load the additional packages in the include-in-header key of the YAML header, using JavaScript as documented on MathJax documentation.\nYou can load several packages at once, as shown in the example below.\n\n\nQuarto Input\nQuarto Output\n\n\n\n---\ntitle: \"Quarto MathJax\"\nformat:\n  html:\n    html-math-method: mathjax\n    include-in-header:\n      - text: |\n          &lt;script&gt;\n          window.MathJax = {\n            loader: {\n              load: ['[tex]/upgreek', '[tex]/boldsymbol', '[tex]/physics']\n            },\n            tex: {\n              packages: {\n                '[+]': ['upgreek', 'boldsymbol', 'physics']\n              }\n            }\n          };\n          &lt;/script&gt;\n---\n\n$$\n\\rank(\\boldsymbol{\\Upsigma})\n$$"
  },
  {
    "objectID": "posts/2023-03-12-quarto-mathjax-packages/index.html#more-on-mathjax-extensionsmacros",
    "href": "posts/2023-03-12-quarto-mathjax-packages/index.html#more-on-mathjax-extensionsmacros",
    "title": "Quarto Q&A: How to use non-default LaTeX packages/macros in MathJax?",
    "section": "\n3 More on MathJax Extensions/Macros",
    "text": "3 More on MathJax Extensions/Macros\nSee https://docs.mathjax.org/en/latest/input/tex/extensions/index.html for more information on MathJax LaTex extensions. See https://docs.mathjax.org/en/latest/input/tex/macros/index.html for more information on MathJax LaTeX macros."
  },
  {
    "objectID": "posts/2025-05-04-AIDD-news/post_to_pub.html",
    "href": "posts/2025-05-04-AIDD-news/post_to_pub.html",
    "title": "AIDD News",
    "section": "",
    "text": "CocoVax 网络服务器通过智能调整病毒基因，为设计更安全有效的减活疫苗提供了新途径。\n研究者成功设计并验证了能同时结合 Hsp90 蛋白 N 端结构域两个关键位点的肽抑制剂。\n研究者开发了 SF-Rx 框架，它能更真实地预测多种药物合用时的相互作用风险，有望让开处方更安全。\nFlatProt 通过标准化的二维可视化，让大规模蛋白质结构比较变得直观高效。\n一种新 AI 模型，能同时分析药物结构和病毒蛋白序列，预测抗逆转录病毒药物效果，特别关注病毒变异。\n机器学习与 SHAP 分析强强联手，为精准定制苯并噻二唑（BTD）衍生物的光物理特性开辟了快车道。\n通过在分子生成时实时检查化学片段的有效性，PSV-PPO 让强化学习药物设计更可靠、性能更强。\nPPI-Graphomer 融合预训练模型和图转换器，通过关注界面相互作用，实现了高精度的蛋白质结合亲和力预测。\n利用预训练图网络，SCRIPT 精准预测单细胞基因的长程调控，性能远超现有工具。\n结合大规模蛋白质组学数据来微调大语言模型，能显著提高罕见基因变异分类的准确性，并增强遗传关联研究的发现能力。"
  },
  {
    "objectID": "posts/2025-05-04-AIDD-news/post_to_pub.html#目录",
    "href": "posts/2025-05-04-AIDD-news/post_to_pub.html#目录",
    "title": "AIDD News",
    "section": "",
    "text": "CocoVax 网络服务器通过智能调整病毒基因，为设计更安全有效的减活疫苗提供了新途径。\n研究者成功设计并验证了能同时结合 Hsp90 蛋白 N 端结构域两个关键位点的肽抑制剂。\n研究者开发了 SF-Rx 框架，它能更真实地预测多种药物合用时的相互作用风险，有望让开处方更安全。\nFlatProt 通过标准化的二维可视化，让大规模蛋白质结构比较变得直观高效。\n一种新 AI 模型，能同时分析药物结构和病毒蛋白序列，预测抗逆转录病毒药物效果，特别关注病毒变异。\n机器学习与 SHAP 分析强强联手，为精准定制苯并噻二唑（BTD）衍生物的光物理特性开辟了快车道。\n通过在分子生成时实时检查化学片段的有效性，PSV-PPO 让强化学习药物设计更可靠、性能更强。\nPPI-Graphomer 融合预训练模型和图转换器，通过关注界面相互作用，实现了高精度的蛋白质结合亲和力预测。\n利用预训练图网络，SCRIPT 精准预测单细胞基因的长程调控，性能远超现有工具。\n结合大规模蛋白质组学数据来微调大语言模型，能显著提高罕见基因变异分类的准确性，并增强遗传关联研究的发现能力。"
  },
  {
    "objectID": "posts/2025-05-04-AIDD-news/post_to_pub.html#cocovax-网页工具智能减毒疫苗设计",
    "href": "posts/2025-05-04-AIDD-news/post_to_pub.html#cocovax-网页工具智能减毒疫苗设计",
    "title": "AIDD News",
    "section": "2 1. CocoVax 网页工具：智能减毒疫苗设计",
    "text": "2 1. CocoVax 网页工具：智能减毒疫苗设计\n\n设计减活疫苗 (LAVs) 是个技术活。目标是削弱病毒的复制能力，让它没那么“毒”，但同时还要保留它的“长相”（抗原性），这样才能教会免疫系统认识它。传统方法往往耗时费力，效果也不稳定。\n现在，研究者开发了一个名为 CocoVax 的在线工具，让这件事变得更简单、更智能。CocoVax 的核心思路是“密码子去优化”。简单说，就是修改病毒基因序列里的同义密码子（这些密码子编码同一个氨基酸，所以不改变最终的蛋白质），让这些密码子在宿主细胞里变得“不受欢迎”，从而拖慢病毒复制的脚步。\nCocoVax 特别之处在于，它不仅关注单个密码子，还关注“密码子对”的使用频率 (CPB)。研究者发现，通过选择宿主细胞里不常用的密码子对来替换原有序列，能更有效地降低病毒的适应性。CocoVax 推荐使用这种 CPB 模式，它利用模拟退火算法来优化整个基因的密码子对分布。当然，用户也可以选择传统的基于密码子适应指数 (CAI) 的方法，或者两者结合。\n这个工具用起来很方便。它有几个主要部分：\n1. 病毒数据库：收集了 1930 种病毒的 4680 个基因组信息。\n2. 基因重编码器：用户上传自己的病毒基因序列，选择去优化策略，就能生成候选的减毒序列。还可以只对基因的某一部分进行修改（比如随机、按顺序或指定区域）。\n3. 序列评估器：生成的序列好不好？这个模块会分析多项指标，比如密码子使用情况 (CAI, CPB)、同义突变数量、RNA 二级结构变化、CpG/TpA 含量等等，帮助用户筛选最有潜力的候选疫苗株。\n4. 参考文献库：整理了 65 篇关于密码子减毒研究的文献摘要（还用了 Qwen 2.5 大模型来帮忙总结），覆盖了 SARS-CoV-2、流感病毒等多种病原体，方便用户查阅相关背景知识。\n研究者用呼吸道合胞病毒 (RSV) 做了个案例研究，发现 CocoVax 生成的 CPB 去优化序列，跟实验验证过的减毒株很相似。而且，即使处理长达 13kb 的基因，工具运行效率也不错。\n跟市面上另一个去优化工具 CoDe 相比，CocoVax 功能更强大：它支持密码子对去优化，评估的指标更多，整合了文献和基因组数据，界面也更现代化，并且是开放获取的。\nCocoVax 提供了一套可定制、结果可解释、有文献支持的病毒基因去优化方案，无论对人类还是动物病毒的疫苗研究，都能大大加速减活疫苗的合理设计过程。\n📜Paper: https://academic.oup.com/nar/advance-article/doi/10.1093/nar/gkaf358/8121642"
  },
  {
    "objectID": "posts/2025-05-04-AIDD-news/post_to_pub.html#新肽抑制剂锁定-hsp90-双位点",
    "href": "posts/2025-05-04-AIDD-news/post_to_pub.html#新肽抑制剂锁定-hsp90-双位点",
    "title": "AIDD News",
    "section": "3 2. 新肽抑制剂锁定 Hsp90 双位点",
    "text": "3 2. 新肽抑制剂锁定 Hsp90 双位点\n\n热休克蛋白 90 (Hsp90) 扮演着分子伴侣的关键角色，帮助许多蛋白质正确成熟，其中不少蛋白质对癌细胞生长至关重要。所以，Hsp90 成为了一个有前景的癌症治疗靶点。不过，想要设计出既有效又精准的 Hsp90 抑制剂并不容易，因为它的相互作用网络很复杂。\n这项研究尝试解决一个特别的难题：设计出能够同时“卡”住 Hsp90 蛋白 N 端区域两个重要位置——ATP 结合口袋和 Cdc37 结合位点的肽。研究者们为此开发了一套新的筛选流程。他们先把机器学习，具体说是一种卷积神经网络，用上来预测哪些肽可能与 Hsp90 结合得比较好。然后，再用分子对接和动态模拟这些计算技术，仔细考察这些候选肽与 Hsp90 结合后的稳定性和具体作用方式。\n研究者找到了三种特别的七肽（由七个氨基酸组成的短链）。模拟结果显示，这三种肽确实能同时跟 ATP 结合口袋和 Cdc37 结合位点结合。更有意思的是，它们通过这种双重结合，正好挡住了 ATP 进入其结合口袋的“大门”。这相当于给 Hsp90 的功能踩了刹车。这项工作不仅揭示了这些肽抑制 Hsp90 的具体方式，也为开发更有效的 Hsp90 靶向药物提供了新思路。同时，它也证明了将机器学习和分子模拟技术结合起来，是设计新肽类药物的一种强大武器。\n📜Paper: https://doi.org/10.1021/acs.jcim.5c00629"
  },
  {
    "objectID": "posts/2025-05-04-AIDD-news/post_to_pub.html#sf-rxai-预测药物互作用提升用药安全",
    "href": "posts/2025-05-04-AIDD-news/post_to_pub.html#sf-rxai-预测药物互作用提升用药安全",
    "title": "AIDD News",
    "section": "4 3. SF-Rx：AI 预测药物互作用，提升用药安全",
    "text": "4 3. SF-Rx：AI 预测药物互作用，提升用药安全\n\n吃好几种药？当心！药物之间可能会“打架”，影响效果甚至带来危险。这就是药物相互作用（DDI）。以前想提前知道哪些药不能一起用，主要靠临床试验，费时费力。计算机预测是个好办法，但要做到又准又可靠，挑战不小。\n现在，研究者们带来了一个新工具——SF-Rx 框架。它基于深度神经网络，像个聪明的侦探，不仅看药物的“长相”（结构相似性），还分析它们在人体内的“旅行路线”（药代动力学，PK）和“发挥作用的方式”（药效动力学，PD）。\n有了这些信息，SF-Rx 不只是简单地说“有风险”或“没风险”，它能更细致地告诉你：风险有多大（严重程度）？属于哪种冲突（类型）？是增强还是减弱药效（影响方向）？这种多维度的预测对医生开具安全的处方非常关键。\n为了确保预测靠谱，研究者用了更接近真实情况的方法来测试 SF-Rx（比如基于药物化学结构骨架的交叉验证），这种方法能更好地评估模型对全新药物组合的预测能力，还能量化预测结果有多大把握。更厉害的是，它采用了“联合学习”技术。这意味着 SF-Rx 能同时从好几个不同的 DDI 数据库里“取经”，汇集各家所长，弥补了单一数据来源可能存在的局限性和信息不够全面的问题。这样一来，模型就能“见多识广”，适应性更强，预测自然更准。\nSF-Rx 为在现实场景下可靠预测药物相互作用提供了一个很有前景的方法。未来，它有望成为医生手中的得力助手，帮助他们在给需要同时使用多种药物的患者开处方时，提前规避风险，大大提升治疗的安全性。\n📜Paper: https://doi.org/10.1021/acs.jcim.5c00075"
  },
  {
    "objectID": "posts/2025-05-04-AIDD-news/post_to_pub.html#flatprot轻松比较蛋白结构",
    "href": "posts/2025-05-04-AIDD-news/post_to_pub.html#flatprot轻松比较蛋白结构",
    "title": "AIDD News",
    "section": "5 4. FlatProt：轻松比较蛋白结构",
    "text": "5 4. FlatProt：轻松比较蛋白结构\n\n比较大量三维蛋白质结构？在二维屏幕上可不容易。这却是结构生物学中的一个基础性工作，对于药物设计和蛋白质功能分析来说非常关键。现在，一个名为 FlatProt 的新工具应运而生。\nFlatProt 的看家本领是创建标准化的蛋白质结构二维可视化图谱。想象一下，它能把复杂的三维结构，用一种统一的方式“压平”到二维图上，同时尽量保留关键信息。怎么做到的呢？它运用基于惯性和基于家族的结构旋转方法，将蛋白质一致地投影到二维空间，确保相关蛋白质的结构方向得以保留，大大提高了可比性。\n这个工具还能做到更多。它可以区分不同的蛋白质结构域，用简化的图形（比如螺旋用锯齿形，链条用三角形）表示二级结构片段，甚至还能叠加上二硫键或 lDDT 分数标示的结构差异区域等注释信息。无论是结构多样的三指毒素（3FTx）家族，还是激肽释放酶（KLK）家族，FlatProt 都能生成一致的可视化结果，让人更容易发现保守特征和家族特有的变异。\n和以前的工具（像 Pro-origami, SSDraw, iCn3D）比起来，FlatProt 在交互性、处理大规模数据的能力以及结构准确性方面更胜一筹，同时还支持用户自定义，并能整合 SCOP/CATH 等蛋白质分类信息。\n性能: 研究者用人类蛋白质组中的 1000 个蛋白质进行了测试。结果显示，FlatProt 处理大小不一（从 16 到 2663 个残基）的蛋白质都很快，在普通硬件上平均每个结构耗时不到 6 秒。它还能生成大规模的家族叠加图，例如，可以将 40 多个 KLK 家族成员同时显示在一张图里，用透明度来反映结构的保守程度。\nFlatProt 非常易于获取和使用。只需要 Python 和一些常用的生物信息学工具（如 DSSP, Foldseek），在普通的笔记本电脑上就能运行。这无疑降低了大规模结构比较的门槛。\n通过提供这种一致、轻量级且易于解读的二维蛋白质图谱，FlatProt 为结构分析在生物信息学流程、教育以及人工智能模型训练中的广泛应用铺平了道路。\n📜Paper: https://www.biorxiv.org/content/10.1101/2025.04.22.650077v2"
  },
  {
    "objectID": "posts/2025-05-04-AIDD-news/post_to_pub.html#预测抗药性-hiv-药物",
    "href": "posts/2025-05-04-AIDD-news/post_to_pub.html#预测抗药性-hiv-药物",
    "title": "AIDD News",
    "section": "6 5. 预测抗药性 HIV 药物",
    "text": "6 5. 预测抗药性 HIV 药物\n\n像 HIV 这样的逆转录病毒给人类健康带来了巨大威胁，所以寻找有效的抗逆转录病毒（ARV）药物一直是当务之急。虽然像 ChEMBL 这样的数据库收集了海量信息，但用起来并不容易。数据非常庞杂，涉及超过 14 万次试验、8 种病毒、350 多种生物活性参数、50 多种靶蛋白、80 多种细胞系以及 770 多种病毒株等等。\n人工智能/机器学习（AI/ML）为加速药物发现带来了希望。研究者们之前也开发过基于信息融合扰动理论和机器学习（IFPTML）策略的 AI 模型来处理 ChEMBL 的 ARV 数据。但是，无论是现有的 AI 模型，还是之前的 IFPTML 版本，都不能同时把病毒蛋白序列、病毒株、细胞系、试验生物体或病毒/人类突变这些信息都考虑进去。这就导致它们无法预测药物对氨基酸序列发生变化的病毒（比如出现突变、变种或新毒株）的效果。考虑到已上市 ARV 药物普遍存在耐药性突变，这是一个非常严重的短板。\n现在，研究者们推出了一种增强版的 IFPTML 模型，它特别整合了蛋白质序列的信息。他们计算并加入了 ChEMBL 数据库里所有药物靶蛋白的序列描述符，这些蛋白来自各种逆转录病毒（如 HIV、FeLV、MMV、SIV 等）的蛋白质组。结果显示，这个新模型的表现相当不错，在训练和验证阶段，它的敏感性（Sn）、特异性（Sp）和准确性（Ac）都在 72% 到 88% 之间。研究者还用这个模型分析了 ChEMBL 数据库和其他文献中记录的蛋白质突变情况。\n📜Paper: 10.1021/acs.jcim.5c00242"
  },
  {
    "objectID": "posts/2025-05-04-AIDD-news/post_to_pub.html#ai-精准设计苯并噻二唑光特性",
    "href": "posts/2025-05-04-AIDD-news/post_to_pub.html#ai-精准设计苯并噻二唑光特性",
    "title": "AIDD News",
    "section": "7 6. AI 精准设计苯并噻二唑光特性",
    "text": "7 6. AI 精准设计苯并噻二唑光特性\n\n苯并噻二唑（BTD）衍生物在先进光物理应用中展现出巨大潜力，但要精确设计出具有理想性能的分子并非易事，主要是因为结构和性质之间的关系太复杂了。而且，用现有的计算方法去预测精确的光物理特性，成本往往很高。\n现在，研究者们尝试了一种新方法。他们运用机器学习技术，并结合摩根指纹（一种分子结构表示法），来预测 BTD 衍生物的最大吸收和发射波长。具体来说，他们测试了三种流行的机器学习模型：随机森林（Random Forest）、LightGBM 和 XGBoost。\n结果相当不错！随机森林模型表现突出，预测吸收波长的 R² 值达到 0.92，预测发射波长的 R² 值也有 0.89。这些结果不仅通过了 10 折交叉验证的内部检验，还用最新的实验数据进行了外部验证，证明了模型的可靠性。\n光有预测还不够，理解模型为什么做出这样的预测同样重要。这时，SHAP（SHapley Additive exPlanations）分析就派上了用场。通过 SHAP 分析，研究者得以洞察影响预测结果的关键因素。分析发现，分子结构中是否存在叔胺基团，以及分子所处环境的溶剂极性如何，是导致发射波长向红光方向移动（红移）的两个关键驱动力。\n为了方便其他研究人员利用这一成果，作者还开发了一个基于网页的预测工具。这项工作清晰地展示了机器学习在加速分子设计方面的巨大潜力，给科研人员提供了一种强大的新思路，能够更高效地设计和改造具有特定优化光物理性质的 BTD 衍生物。\n📜Paper: https://doi.org/10.1021/acs.jcim.4c02414"
  },
  {
    "objectID": "posts/2025-05-04-AIDD-news/post_to_pub.html#psv-ppo-基于强化学习rl新药物设计模型",
    "href": "posts/2025-05-04-AIDD-news/post_to_pub.html#psv-ppo-基于强化学习rl新药物设计模型",
    "title": "AIDD News",
    "section": "8 7. PSV-PPO: 基于强化学习（RL）新药物设计模型",
    "text": "8 7. PSV-PPO: 基于强化学习（RL）新药物设计模型\n\n在药物设计领域，用强化学习（RL）生成新分子是个热门方向，但常常遇到一个头疼的问题：模型“画”出来的分子很多根本不符合化学规则，也就是无效的。\n研究者提出了一个新方法叫 PSV-PPO。它聪明的地方在于，没有等到整个分子式（SMILES 字符串）生成完毕才去检查它合不合规矩，而是在生成过程中的每一步都进行实时验证。想象一下，就像搭积木，每放一块都确认一下稳不稳，而不是等整个楼塌了才发现问题。\n这个实时验证的核心是个叫做“PSV 真值表”的东西。它像个导航地图，在模型决定下一步添加哪个原子或化学键时，会查一下这个表，看看哪些选择是“合法”的。如果某个选择会导致后续无法形成有效的化学结构，模型就会收到一个“惩罚”信号，从而学着避开这些死胡同。\n为了让模型在探索新分子结构的同时，又能保证化学上的正确性，并且避免生成一堆相似的分子，PSV-PPO 还设计了好几个特别的“调教”工具（损失函数）。比如，有专门控制探索程度的，有保持分子多样性的，还有稳定学习过程的。这些工具协同工作，让整个生成过程又稳又好。\n效果怎么样呢？在业界公认的 GuacaMol 分子生成基准测试中，PSV-PPO 表现非常亮眼，20 个任务里拿了 14 个第一，其中 11 个任务更是达到了满分。跟其他方法（比如 Reinvent、GEGL）相比，无论是在重新发现已知药物分子，还是在优化多个分子属性方面，PSV-PPO 都展现了明显的优势。而且，生成的分子不仅属性好，多样性也很不错。\n研究者还做了“拆零件”实验（消融研究）来验证各个部分的作用。结果发现，如果拿掉 PSV 真值表，生成分子的有效性就急剧下降；如果关掉那几个定制的损失函数，要么分子多样性变差，要么模型容易“卡壳”。这证明了 PSV-PPO 设计的精妙之处。\n更棒的是，PSV-PPO 并不挑剔基础模型。不管你用的是 LSTM 还是 GPT 类的模型来生成 SMILES，都可以把 PSV-PPO 这套方法嫁接上去。这使得它在实际的药物发现流程中具有很强的通用性。\nPSV-PPO 很好地解决了强化学习在分子生成中探索新颖性和保证化学正确性之间的矛盾，为计算机辅助药物设计提供了一个强大又实用的新工具。\n📜Paper: https://arxiv.org/abs/2505.00530"
  },
  {
    "objectID": "posts/2025-05-04-AIDD-news/post_to_pub.html#ppi-graphomer-ai-模型精准预测蛋白质结合力",
    "href": "posts/2025-05-04-AIDD-news/post_to_pub.html#ppi-graphomer-ai-模型精准预测蛋白质结合力",
    "title": "AIDD News",
    "section": "9 8. PPI-Graphomer: AI 模型精准预测蛋白质结合力",
    "text": "9 8. PPI-Graphomer: AI 模型精准预测蛋白质结合力\n\n介绍一种名为 PPI-Graphomer 的新深度学习框架。这个框架巧妙地将强大的预训练蛋白质语言模型（如 ESM2 和 ESM-IF1）与图转换器架构结合起来，目的是更准确地预测蛋白质之间的结合亲和力，并且让预测结果更容易理解。\n具体来说，模型利用 ESM2 获取蛋白质的序列信息，利用 ESM-IF1 捕捉其三维结构特征。更进一步，研究者设计了一个核心的 PPI-Graphomer 模块。这个模块是一个基于图的转换器，它的特别之处在于能够直接模拟蛋白质链之间界面区域的相互作用，甚至将化学相互作用（比如氢键、二硫键）和氨基酸对的空间距离（关注 7 埃以内）信息编码进注意力机制。这样一来，模型就能把“注意力”集中在那些对结合真正起作用的界面氨基酸残基上，抓住决定结合强度的“热点”。\n为了验证效果，研究者在 PDBbind 等公认的基准数据集上对 PPI-Graphomer 进行了训练和评估。结果相当亮眼，模型性能达到了当前最佳水平（例如，在一个包含 162 个样本的测试集上，皮尔逊相关系数 PCC 达到 0.633，平均绝对误差 MAE 为 1.57），明显优于像 FoldX、Rosetta 这样的传统经验方法，也超过了 PRODIGY、CP-PIE 等其他基线模型，尤其是在处理复杂多样的蛋白质样本时，优势更为明显。\n研究者还通过消融实验（即分别去掉模型的某个部分再测试性能）证明了各个组成部分的价值。结果显示，无论是去掉 ESM2 提供的序列信息、ESM-IF1 提供的结构信息，还是去掉专门处理界面的 PPI-Graphomer 模块，模型的预测性能都会显著下降。这有力地说明了序列、结构和界面信息对于精确预测结合亲和力是相辅相成、缺一不可的。虽然大规模预训练的 ESM2 序列特征贡献最大，但 PPI-Graphomer 模块对界面相互作用的精细建模，对提升预测精度起到了关键的助推作用。\n此外，在只包含两种蛋白质的复合物子集上测试，PPI-Graphomer 的表现同样出色，相关性得分高于传统打分工具，甚至优于流行的结构预测工具 ColabFold 中的 iPAE 指标，显示了其良好的鲁棒性。\n总的来看，PPI-Graphomer 通过整合进化尺度的蛋白质信息和关注相互作用的注意力机制，为蛋白质相互作用（PPI）驱动的药物发现和结构生物学领域提供了一个强大且可扩展的预测建模新工具。\n📜Paper: https://bmcbioinformatics.biomedcentral.com/articles/10.1186/s12859-025-06123-2"
  },
  {
    "objectID": "posts/2025-05-04-AIDD-news/post_to_pub.html#ai-模型-script-揭示单细胞调控奥秘",
    "href": "posts/2025-05-04-AIDD-news/post_to_pub.html#ai-模型-script-揭示单细胞调控奥秘",
    "title": "AIDD News",
    "section": "10 9. AI 模型 SCRIPT 揭示单细胞调控奥秘",
    "text": "10 9. AI 模型 SCRIPT 揭示单细胞调控奥秘\n\n介绍一个新工具 SCRIPT。它是个深度学习框架，用来预测单个细胞里的基因调控关系，特别是那些距离很远的调控。跟以前只看相关性的工具（比如 LINGER、SCARLink）不一样，SCRIPT 用上了图因果注意力网络 (GCAT)。这样做，就能更深入地模拟基因调控的因果关系，让预测结果更符合生物学实际。\nSCRIPT 的一个亮点是它的“预训练”环节。研究者用了一个叫自监督图自编码器 (SSGAE) 的东西，在大约 130 万个单细胞 ATAC-seq 数据上进行了训练。这样一来，模型就能学到不同组织里顺式调控元件 (CREs) 的通用特征。\n效果怎么样？相当不错。用细胞类型特异性的染色质接触数据来预测调控关系时，SCRIPT 的平均 AUC 达到了 0.90，把 SCARLink (0.68) 和 LINGER (0.65) 甩在了后面。特别是在预测距离超过 10 万碱基对的长程调控时，它的改进超过了三倍。为了模拟基因表达，这个框架还利用了真实的 Hi-C 和 eQTL 数据构建的注意力掩码，把已知的染色体环化结构信息也融入了模型。\n在脑皮层和外周血单个核细胞 (PBMC) 数据集上的对比测试也显示，SCRIPT 能更好地把不同细胞类型分开 (UMAP 分离度更高)，而且假阳性率更低，找出了以前模型忽略掉的调控互动。\n更实际的应用来了。在阿尔茨海默病 (AD) 和精神分裂症 (SCZ) 的研究中，SCRIPT 成功地将非编码区的 GWAS 风险位点和它们真正的目标基因联系起来，而且是细胞类型特异性的。比如，它能准确地把 rs7251911 指向小胶质细胞中的 APOE 基因，把 rs2949006 指向兴奋性神经元中的 SATB2 基因。这些发现不仅得到了 PLAC-seq 和差异基因表达数据的支持，也比简单地找最近基因或者其他模型的方法更有效，有助于揭示疾病的潜在机制。\nSCRIPT 计算出的调控分数也很靠谱，跟 H3K27ac 这类细胞类型特异性的增强子标记物很吻合，还能重现已知的生物功能模式，比如 AD 中小胶质细胞对 Aβ 清除的调控，以及 SCZ 中神经元的突触可塑性调控。\n📜Paper: https://www.biorxiv.org/content/10.1101/2025.04.27.650894v1"
  },
  {
    "objectID": "posts/2025-05-04-AIDD-news/post_to_pub.html#llm-遇上蛋白质组学基因变异分类新创新",
    "href": "posts/2025-05-04-AIDD-news/post_to_pub.html#llm-遇上蛋白质组学基因变异分类新创新",
    "title": "AIDD News",
    "section": "11 10. LLM 遇上蛋白质组学：基因变异分类新创新！",
    "text": "11 10. LLM 遇上蛋白质组学：基因变异分类新创新！\n\n解读罕见的基因变异对人类健康的影响，一直是遗传学研究中的一个挑战。这项研究探索了一种新方法，把蛋白质组学信息和强大的大语言模型（LLM）结合起来，让变异分类变得更准、更有力。\n研究者们利用了来自英国生物样本库（UK Biobank）46,665 人的血浆蛋白质组学数据。他们发现，基因编码变异与蛋白质丰度的变化之间存在很强的联系，特别是那些被预测为有害的变异。\n基于这个发现，他们建立了一个两步模型。第一步，用同义变异和功能缺失（pLoF）变异训练出一个分类器，给罕见的错义变异打上标签。第二步，用这些标签去微调一个现有的大语言模型 ESM-1b，最终得到了新模型 ESM-1b+proteomics。\n效果怎么样呢？跟标准的 LLM（比如 ESM-1b、ESM-1v、AlphaMissense）相比，ESM-1b+proteomics 在验证蛋白质组学检测结果时，相关性更高，尤其是在分析同一个基因内不同错义变异的影响时，表现突出。\n研究者还用 241 对已知的基因 - 性状关联（pLoF 关联）对模型进行了测试。只使用极罕见的单核苷酸错义变异，ESM-1b+proteomics 成功重现了 88 个关联，这个成绩超过了所有其他测试方法，包括 AlphaMissense（87 个）和原始的 ESM-1b（83 个）。\n随后，这个模型被应用于英国生物样本库中的 10 种复杂性状分析。结果，它在全基因组范围内发现了 177 个显著的基因 - 性状关联。这比传统的组合方法多出了 24.6%，比原始的 ESM-1b 也提升了 15.7%。更厉害的是，它还发现了一些全新的关联，比如 PCSK6 基因与甘油三酯水平的联系，以及 SIX1 基因与听力损失的联系。这些都是传统变异分类器未能捕捉到的信息，显示了新模型在发现药物靶点方面的潜力。\n在对 ClinVar 数据库中的变异进行分类时，ESM-1b+proteomics 的表现同样出色，AUROC 值达到 0.940，优于 ESM-1b 的 0.919。虽然 AlphaMissense 的 AUROC 略高（0.947），但在关联研究的应用中，ESM-1b+proteomics 显示出更强的实用价值。\n好消息是，这种利用蛋白质组学数据进行微调的方法，不仅仅适用于 ESM-1b。研究者发现，它也能有效提升其他 LLM（包括 ESM-1v 和 ESM-2 系列模型）的性能，特别是对那些规模较小的模型，改进效果更明显。\n这项工作证明，大规模人类蛋白质组学数据可以作为一个强大且无偏见的“老师”，指导和优化用于遗传变异解读的大语言模型。这不仅能提高基因研究的发现效率，还能帮助我们更深入地理解基因变异背后的生物学机制。\n📜Paper: https://www.biorxiv.org/content/10.1101/2025.04.28.650692v1"
  },
  {
    "objectID": "posts/2024-12-30-quarto-github-pages/index.html",
    "href": "posts/2024-12-30-quarto-github-pages/index.html",
    "title": "Quarto: Publishing to GitHub Pages",
    "section": "",
    "text": "Publishing Quarto projects to GitHub Pages can seem daunting, but with the right approach, it’s a breeze.\nThis blog post will walk you through various methods to deploy your Quarto creations, from simple manual steps to automated workflows using GitHub Actions.\nBy the end, you’ll have the know-how to share your dynamic documents, books, and websites seamlessly with the world.\nLet’s dive into the essentials of making your Quarto project live on GitHub Pages."
  },
  {
    "objectID": "posts/2024-12-30-quarto-github-pages/index.html#prerequisites",
    "href": "posts/2024-12-30-quarto-github-pages/index.html#prerequisites",
    "title": "Quarto: Publishing to GitHub Pages",
    "section": "1 Prerequisites",
    "text": "1 Prerequisites\n\n\n\n\n\n\nImportant\n\n\n\nBefore proceeding, ensure you have enabled and configured GitHub Pages for your repository (i.e., https://github.com/&lt;username&gt;/&lt;repository&gt;/settings/pages), see GitHub Pages documentation for more details.\n\n\nThe following methods mostly assume your GitHub repository is public. If your repository is private, you may need to adjust the settings to allow GitHub Pages to access the repository using a personal access token.\nYou can use the Quarto project created with the quarto create project website command as a demo project to try out the methods described in this guide. This will provide a practical example to follow along with."
  },
  {
    "objectID": "posts/2024-12-30-quarto-github-pages/index.html#manual-approach",
    "href": "posts/2024-12-30-quarto-github-pages/index.html#manual-approach",
    "title": "Quarto: Publishing to GitHub Pages",
    "section": "2 Manual Approach",
    "text": "2 Manual Approach\n\n2.1 Using Quarto CLI\nThe manual method involves using the Quarto Command Line Interface (CLI) to publish your project. This method is straightforward and requires minimal setup.\nquarto publish gh-pages\nCheck out the Quarto CLI help for more details on the publish command.\nquarto publish --help\n\n\n\n\n\n\nNote\n\n\n\nThe gh-pages branch is used to publish to GitHub Pages.\nquarto publish gh-pages setups the gh-pages branch, renders your project, and pushes the output to the branch.\nYou can use the --no-render flag to skip rendering and only push a previously rendered project."
  },
  {
    "objectID": "posts/2024-12-30-quarto-github-pages/index.html#automated-approach",
    "href": "posts/2024-12-30-quarto-github-pages/index.html#automated-approach",
    "title": "Quarto: Publishing to GitHub Pages",
    "section": "3 Automated Approach",
    "text": "3 Automated Approach\nAutomation can streamline the publishing process and reduce the risk of errors. Here are two automated methods using GitHub Actions.\n\n\n\n\n\n\nImportant\n\n\n\nEnsure you have the necessary permissions to create and manage GitHub Actions workflows in your repository (i.e., https://github.com/&lt;username&gt;/&lt;repository&gt;/settings/actions), see GitHub Actions documentation for more details.\n\n\n\n3.1 Quarto Publish GitHub Action\nQuarto provides an official GitHub Action that simplifies the publishing process. This action takes care of the entire workflow but requires to use quarto publish gh-pages locally at least once to set up the gh-pages branch.\n\n\n.github/workflows/deploy.yml\n\nname: Deploy\n\non:\n  workflow_dispatch:\n  push:\n    branches:\n      - main\n\npermissions:\n  contents: read\n\nconcurrency:\n  group: ${{ github.workflow }}\n  cancel-in-progress: true\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    permissions: \n      contents: write\n      pages: write\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Install Quarto\n        uses: quarto-dev/quarto-actions/setup@v2\n        with:\n          version: pre-release\n      # Add any additional steps as needed, such as installing dependencies\n      - name: Build and Deploy\n        uses: quarto-dev/quarto-actions/publish@v2\n        with:\n          target: gh-pages\n\n\n\n\n\n\n\nNote\n\n\n\nThe quarto-dev/quarto-actions GitHub Actions are maintained by the Quarto team.\nYou can find more information about these actions in the Quarto Actions repository.\n\n\n\n\n3.2 Custom GitHub Actions Workflow\nFor more control over the publishing process, you can set up a custom GitHub Actions workflow. We’ll discuss two scenarios:\n\nDeploy from a branch (Deploy from a branch - GitHub)\nClassic Pages experience, where the content is published from a specific branch root or /docs folder.\nGitHub Actions (GitHub Actions - GitHub)\nBest for using frameworks and customizing your build process.\n\n\n3.2.1 Deploy From a Branch\nYou can configure a workflow to publish your Quarto project whenever changes are pushed to a specific branch (e.g., main) and deploy the output to GitHub Pages from a specific folder/branch.\n\n\n\n\n\n\nNote\n\n\n\nThe GitHub Action workflow described in Quarto Publish GitHub Action uses gh-pages root as the source for GitHub Pages.\n\n\n\n3.2.1.1 Deploying From the docs Folder (e.g., main Branch)\nUsing the docs folder as the source for GitHub Pages. Be sure to use a Quarto project (i.e., _quarto.yml) to be able to set output-dir.\n\n\n.github/workflows/deploy.yml\n\nname: Deploy\n\non:\n  workflow_dispatch:\n  push:\n    branches:\n      - main\n\npermissions:\n  contents: read\n\nconcurrency:\n  group: ${{ github.workflow }}\n  cancel-in-progress: true\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    permissions: \n      contents: write\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Install Quarto\n        uses: quarto-dev/quarto-actions/setup@v2\n        with:\n          version: pre-release\n      # Add any additional steps as needed, such as installing dependencies\n      - name: Build\n        shell: bash\n        run: |\n          [ ! -f _quarto.yml ] && echo -e \"project:\\n  output-dir: docs\" &gt; _quarto.yml\n          if grep -q \"output-dir: docs\" _quarto.yml; then\n            quarto render\n          else\n            quarto render --output-dir docs\n          fi\n      - name: Deploy\n        shell: bash\n        run: |\n          git config --local user.name github-actions[bot]\n          git config --local user.email 41898282+github-actions[bot]@users.noreply.github.com\n          git add docs || echo \"No changes.\"\n          git commit -m \"ci: quarto render\" || echo \"No changes.\"\n          git push origin || echo \"No changes.\"\n\n\n\n3.2.1.2 Deploying From the Root (e.g., gh-pages Branch)\nUsing the root of the gh-pages branch as the source for GitHub Pages.\n\n\n\n\n\n\nTip\n\n\n\nThis method offers an advantage over quarto publish gh-pages as it does not necessitate a local run to create the gh-pages branch beforehand.\nAdditionally, it provides some insight into the processes that occur behind the scenes when using quarto publish gh-pages, thus when using the Quarto Publish GitHub Action.\n\n\n\n\n.github/workflows/deploy.yml\n\nname: Deploy\n\non:\n  workflow_dispatch:\n  push:\n    branches:\n      - main\n\npermissions:\n  contents: read\n\nconcurrency:\n  group: ${{ github.workflow }}\n  cancel-in-progress: true\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    permissions: \n      contents: write\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Install Quarto\n        uses: quarto-dev/quarto-actions/setup@v2\n        with:\n          version: pre-release\n      # Add any additional steps as needed, such as installing dependencies\n      - name: Build\n        shell: bash\n        run: |\n          [ ! -f _quarto.yml ] && echo -e \"project:\\n  output-dir: _site\" &gt; _quarto.yml\n          if grep -q \"output-dir: _site\" _quarto.yml; then\n            quarto render\n          else\n            quarto render --output-dir _site\n          fi\n      - name: Deploy\n        shell: bash\n        env:\n          GH_PAGES: gh-pages\n        run: |\n          git config --local user.name github-actions[bot]\n          git config --local user.email 41898282+github-actions[bot]@users.noreply.github.com\n          BUILD_DIR=$(mktemp -d)\n          mv _site \"${BUILD_DIR}/quarto-output\"\n          if git ls-remote --exit-code origin \"${GH_PAGES}\"; then\n            git fetch origin \"${GH_PAGES}\"\n            git checkout origin/\"${GH_PAGES}\"\n          else\n            git checkout --orphan \"${GH_PAGES}\"\n            git rm -rf .\n          fi\n          mv ${BUILD_DIR}/quarto-output/* .\n          git add . || echo \"No changes.\"\n          git commit --allow-empty -m \"ci: quarto render\" || echo \"No changes.\"\n          git push origin \"${GH_PAGES}\" || echo \"No changes.\"\n\n\n\n\n3.2.2 GitHub Actions\nFor more sophisticated workflows, you have the option to customise the build process, thus eliminating the need to set up the gh-pages or docs folder. This approach is particularly advantageous as it ensures that the source repository remains uncluttered, maintaining a clear separation between the source code and the build/deploy process and environment.\n\n\n.github/workflows/deploy.yml\n\nname: Deploy\n\non:\n  workflow_dispatch:\n  push:\n    branches:\n      - main\n\npermissions:\n  contents: read\n\nconcurrency:\n  group: \"pages\"\n  cancel-in-progress: false\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    permissions:\n      pages: write\n      id-token: write\n    environment:\n      name: github-pages\n      url: ${{ steps.deployment.outputs.page_url }}\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n      - name: Install Quarto\n        uses: quarto-dev/quarto-actions/setup@v2\n        with:\n          version: pre-release\n      - name: Build\n        shell: bash\n        run: |\n          [ ! -f _quarto.yml ] && echo -e \"project:\\n  output-dir: _site\" &gt; _quarto.yml\n          if grep -q \"output-dir: _site\" _quarto.yml; then\n            quarto render\n          else\n            quarto render --output-dir _site\n          fi\n      - name: Configure GitHub Pages\n        uses: actions/configure-pages@v5\n      - name: Upload Pages Artifact\n        uses: actions/upload-pages-artifact@v3\n        with:\n          path: \"_site\"\n      - name: Deploy\n        id: deployment\n        uses: actions/deploy-pages@v4\n\n\n\n\n\n\n\nNote\n\n\n\nThe workflow above utilises _site as the output directory, which is the default output directory for Quarto website projects. You can modify the output directory as necessary, provided it aligns with the Upload Pages Artifact step.\n\n\n\n\n\n3.3 Keeping Your GitHub Actions Workflow Up-to-Date\nGitHub Actions workflows are versioned, and new versions are released periodically. To ensure your workflows are up-to-date, you can use Dependabot to automatically create pull requests when new versions of your dependencies are available.\n\n\n.github/dependabot.yml\n\nversion: 2\nupdates:\n  - package-ecosystem: \"github-actions\"\n    directory: \"/\"\n    schedule:\n      interval: \"weekly\"\n\nThis configuration file instructs Dependabot to check for updates to GitHub Actions workflows weekly.\nFor more information on Dependabot, see the Dependabot documentation."
  },
  {
    "objectID": "posts/2024-12-30-quarto-github-pages/index.html#conclusion",
    "href": "posts/2024-12-30-quarto-github-pages/index.html#conclusion",
    "title": "Quarto: Publishing to GitHub Pages",
    "section": "4 Conclusion",
    "text": "4 Conclusion\nBy following these methods, you’ll be able to publish your Quarto projects to GitHub Pages efficiently.\nChoose the approach that best suits your needs and workflow.\nHappy publishing!"
  }
]